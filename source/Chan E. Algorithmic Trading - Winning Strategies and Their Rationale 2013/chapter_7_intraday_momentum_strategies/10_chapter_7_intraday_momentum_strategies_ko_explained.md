---
lang: ko
format:
  html:
    toc: true
    embed-resources: true
    theme: cosmo
---

# 제7장: 일중 모멘텀 전략 — 쉬운 해설판

> 이 글은 Ernest Chan의 "Algorithmic Trading" 제7장의 전체 내용을 빠짐없이 담되, 전문 용어와 개념을 일상적인 비유와 풀어쓴 설명으로 재구성한 해설판입니다.

---

## 도입: 하루 안의 짧은 파도를 타다

여러분, 지금까지 우리는 모멘텀이라는 강력한 시장 현상을 탐구해왔습니다. 앞 장에서 주식이든 선물이든 대부분의 금융상품이 **횡단면 모멘텀(cross-sectional momentum)** --- 같은 시점에서 여러 종목을 비교했을 때 최근 잘 나간 종목이 계속 잘 나가는 현상 --- 을 보이며, 종종 **시계열 모멘텀(time-series momentum)** --- 한 종목의 과거 추세가 미래에도 이어지는 현상 --- 도 함께 나타난다는 걸 확인했습니다.

그런데 여기에 한 가지 고민이 있습니다. 이런 모멘텀이 작동하는 **시간 지평(time horizon)**이 일반적으로 **한 달 이상**으로 길다는 점입니다.

긴 보유 기간은 두 가지 골치 아픈 문제를 만듭니다.

1. **독립적인 거래 신호가 드뭅니다.** 한 달에 한 번 신호가 나오면 1년에 12번 정도밖에 거래를 안 하는 셈이라, **샤프 비율(Sharpe ratio)** --- 위험 대비 수익의 효율을 재는 척도 --- 이 낮아지고, 백테스트의 **통계적 유의성**도 떨어집니다. 비유하자면, 동전을 12번만 던져서 "이 동전은 앞면이 더 자주 나온다"고 확신하기 어려운 것과 같습니다.
2. **금융 위기 이후 성과가 저조합니다.** 2008년 같은 대위기가 터지면, 한 달짜리 모멘텀은 크게 흔들리며 회복이 느립니다.

그렇다면 해법은 무엇일까요? 바로 이 장의 주인공, **일중 모멘텀 전략(intraday momentum strategies)** --- 하루 안에 포지션을 열고 닫는, 짧은 파도 타기 전략 --- 입니다. 이 전략은 위의 두 가지 단점에서 자유롭습니다. 하루에 여러 번 거래하니 신호가 많고, 야간 위험에 노출되지 않으니 위기에도 비교적 안전합니다.

### 일중에도 모멘텀이 작동하는 이유

앞서 우리는 모멘텀의 **네 가지 주요 원인**을 열거했습니다. 좋은 소식은, 이 중 하나를 제외한 모두가 일중 시간대에서도 유효하다는 것입니다. 유일한 예외는 **롤 수익률(roll return)**의 지속성인데, 이것은 선물 계약이 만기에 가까워질 때 다음 계약으로 "넘기면서" 발생하는 수익입니다. 일중 시간대에서는 그 크기와 변동성이 너무 작아 실질적인 의미가 없습니다.

하지만 단기 시간대에 **추가로 작동하는** 모멘텀 원인이 있습니다. 바로 **손절매 주문(stop orders)**의 연쇄 발동입니다. 이것을 이해하기 위해 비유를 들어보겠습니다.

> 산 위에 도미노를 일렬로 세워놨다고 상상해보세요. 첫 번째 도미노가 넘어지면 연쇄적으로 다음 도미노들이 쓰러집니다. 시장에서 가격이 특정 수준을 돌파하면, 그 수준에 설정된 손절매 주문들이 한꺼번에 발동되고, 이 발동이 가격을 더 밀어붙여 또 다른 손절매 주문을 발동시킵니다. 이것이 바로 **돌파 전략(breakout strategies)**의 핵심 원리입니다.

우리는 이 장에서 시장 개장 시 진입하는 예시와, 다양한 **지지선(support)** --- 가격이 더 이상 내려가기 어려운 바닥 --- 또는 **저항선(resistance)** --- 가격이 더 이상 올라가기 어려운 천장 --- 수준에서 일중 진입하는 예시를 살펴볼 것입니다.

### 일중 모멘텀의 다양한 촉발 요인

일중 모멘텀은 단순한 가격 움직임을 넘어 **특정 이벤트**에 의해서도 촉발됩니다.

- **기업 뉴스**: 실적 발표, 애널리스트 추천 변경 등
- **거시경제 뉴스**: 금리 결정, 고용 지표 발표 등

이러한 이벤트가 시계열 모멘텀을 만들어낸다는 것은 오래전부터 알려져 있었습니다. 하지만 저자는 각 특정 이벤트 범주가 얼마나 강한 효과를 내는지에 대한 **새로운 연구 결과**를 제시합니다.

또한 일중 모멘텀은 **대형 펀드의 행동**에 의해서도 촉발될 수 있습니다. 특히 **레버리지 ETF(leveraged ETFs)** --- 기초 지수의 움직임을 2배, 3배로 추종하도록 설계된 펀드 --- 의 일일 리밸런싱이 어떻게 단기 모멘텀으로 이어지는지 살펴봅니다. 마치 코끼리가 수영장에 들어가면 물이 출렁이듯, 거대한 펀드가 매일 포트폴리오를 재조정하면 시장에 파동이 일어나는 것입니다.

마지막으로, 가장 짧은 시간 척도에서는 다음 요인들이 가격에 모멘텀을 유발합니다.

- **매수-매도 호가 수량의 불균형**: 사려는 사람이 팔려는 사람보다 훨씬 많으면 가격이 오를 가능성이 높습니다.
- **주문 흐름(order flow)의 변화**: 주문의 물줄기가 한쪽으로 쏠리면 가격이 그 방향으로 움직입니다.
- **손절매 주문의 비균일 분포**: 특정 가격대에 손절매가 몰려 있으면 그 수준 돌파 시 연쇄 효과가 발생합니다.

이러한 모멘텀을 활용하는 일반적인 **고빈도 거래(high-frequency trading, HFT)** --- 번개처럼 빠른 속도로 초단위 이하 매매를 하는 전략 --- 전술이 이 장에서 제시됩니다.

---

## 시가 갭 전략: 아침의 도약을 포착하라 (Opening Gap Strategy)

### 왜 이것이 중요한가

4장에서 우리는 주식에 대한 **평균 회귀형 갭 매수 전략(mean-reverting buy-on-gap strategy)** --- 갭이 생기면 원래 가격으로 돌아올 것이라 보고 반대 방향으로 거래하는 전략 --- 을 논의했습니다. 하지만 선물과 통화에서는 정반대의 전략이 작동할 수 있습니다.

**모멘텀 갭 전략의 핵심 아이디어**는 아주 간단합니다.

- 상품이 **갭 상승**(어제 종가보다 오늘 시가가 높게 시작)하면 **매수**합니다.
- 상품이 **갭 하락**(어제 종가보다 오늘 시가가 낮게 시작)하면 **공매도**합니다.

왜 이런 전략이 통할까요? 비유를 들어보겠습니다.

> 여러분이 어떤 가게의 오늘 오픈 가격이 어제 마감 가격보다 확 올랐다고 상상해보세요. 이것은 밤새 뭔가 좋은 일이 있었다는 신호입니다. 그리고 이 좋은 뉴스에 아직 반응하지 못한 사람들이 하루 종일 뒤늦게 매수에 합류하면서 가격이 더 올라가는 것입니다.

### FSTX에서의 검증 결과

여러 선물에서 테스트한 후, 이 전략은 **Eurex에서 거래되는 Dow Jones STOXX 50 지수 선물(FSTX)**에서 가장 잘 작동했습니다.

| 지표 | 수치 |
|------|------|
| 테스트 기간 | 2004년 7월 16일 ~ 2012년 5월 17일 |
| **연간 수익률(APR)** | **13%** |
| **샤프 비율** | **1.4** |

샤프 비율 1.4는 상당히 훌륭한 수준입니다. 일반적으로 1.0 이상이면 좋은 전략으로 간주되니까요.

### 예제 7.1: FSTX 시가 갭 전략 코드

예제 7.1은 갭 모멘텀 코드를 보여줍니다(*gapFutures\_FSTX.m*으로 다운로드 가능).

이 코드는 시가, 고가, 저가, 종가가 *T* x 1 배열 *op, hi, lo, cl*에 포함되어 있다고 가정합니다. epchan.com/book2에서 다운로드할 수 있는 유틸리티 함수 *smartMovingStd*와 *backshift*를 사용합니다.

**코드를 읽기 전에, 전략 로직을 먼저 이해합시다:**

1. 먼저 과거 90일간 종가 대비 수익률의 **이동 표준편차**를 계산합니다 --- 이것이 "정상적인 변동폭"의 기준이 됩니다.
2. 오늘 시가가 어제 고가보다 **일정 임계값 이상** 높으면 롱(매수) 신호입니다.
3. 오늘 시가가 어제 저가보다 **일정 임계값 이상** 낮으면 숏(매도) 신호입니다.
4. 시가에 진입하여 종가에 청산합니다.

```matlab
entryZscore=0.1;
stdretC2C90d=backshift(1, smartMovingStd(calculateReturns ...
 (cl, 1), 90));
longs=op > backshift(1, hi).*(1+entryZscore*stdretC2C90d);
shorts=op < backshift(1, lo).*(1-entryZscore*stdretC2C90d);
positions=zeros(size(cl));
positions(longs)=1;
positions(shorts)=-1;
ret=positions.*(op-cl)./op;
```

**코드를 한 줄씩 풀어봅시다:**

- `entryZscore=0.1`: 진입 **Z-점수** 임계값을 0.1로 설정합니다. 이것은 "얼마나 큰 갭이어야 진입할지"를 결정하는 민감도 조절기입니다. 0.1이면 상당히 작은 갭에도 반응한다는 뜻입니다.
- `stdretC2C90d`: 과거 90일간의 **종가-대-종가 수익률의 이동 표준편차**입니다. `backshift(1, ...)`은 하루 전 값을 사용한다는 뜻으로, 미래 참조를 방지합니다.
- `longs=op > backshift(1, hi).*(1+entryZscore*stdretC2C90d)`: 오늘 시가가 "어제 고가 x (1 + 0.1 x 90일 표준편차)"보다 크면 롱 포지션을 잡습니다. 즉, 어제 고가를 상당폭 넘어서는 갭 상승이 발생해야 진입합니다.
- `shorts=op < backshift(1, lo).*(1-entryZscore*stdretC2C90d)`: 반대로, 오늘 시가가 "어제 저가 x (1 - 0.1 x 90일 표준편차)"보다 작으면 숏 포지션을 잡습니다.
- `positions`: 1은 롱, -1은 숏, 0은 무포지션.
- `ret=positions.*(op-cl)./op`: 시가에서 종가까지의 수익률을 계산합니다. 시가에 진입하고 종가에 청산하는 구조입니다.

![](_page_2_Figure_2.jpeg)

**그림 7.1** FSTX 시가 갭 전략의 자산 곡선 (Equity Curve of FSTX Opening Gap Strategy)

그림 7.1을 보면 자산 곡선이 전반적으로 우상향하는 것을 확인할 수 있습니다. 이것은 전략이 시간이 지남에 따라 꾸준히 수익을 창출했다는 뜻입니다.

### 통화 시장으로의 확장

동일한 전략이 일부 **통화**에서도 작동합니다. 그러나 여기서 한 가지 까다로운 점이 있습니다 --- 통화 시장은 24시간 거래되므로 자연스러운 "시가"와 "종가"가 없다는 것입니다. 따라서 이를 다르게 정의해야 합니다.

저자의 정의는 다음과 같습니다.

| 구분 | 시간 | 이유 |
|------|------|------|
| **종가** | 동부 표준시(ET) 오후 5시 | 뉴욕 세션 마감 |
| **시가** | 동부 표준시 오전 5시 | 런던 개장에 해당 |

이 정의로 **GBPUSD(영국 파운드/미국 달러)**에 적용했을 때의 결과입니다.

| 지표 | 수치 |
|------|------|
| 테스트 기간 | 2007년 7월 23일 ~ 2012년 2월 20일 |
| **연간 수익률** | **7.2%** |
| **샤프 비율** | **1.3** |

당연히 다양한 통화에 대해 시가와 종가 시간의 다른 정의를 실험해볼 수 있습니다. 그리고 중요한 포인트: 대부분의 통화 시장은 **금요일 오후 5시부터 일요일 오후 5시까지** 휴장하므로, 주말은 이러한 전략에 자연스러운 "갭"이 됩니다. 마치 2일 동안 닫혀 있던 문이 열릴 때 그 사이에 쌓인 뉴스와 이벤트가 한꺼번에 반영되는 것입니다.

### 갭이 모멘텀을 촉발하는 메커니즘

때때로 모멘텀을 촉발하는 **야간 또는 주말 갭**의 특별한 점은 무엇일까요? 핵심 메커니즘은 이렇습니다.

1. **거래가 없는 연장된 기간** 동안 시가가 종가와 상당히 달라질 수 있습니다.
2. 이전에 다른 가격 수준에 설정된 **손절매 주문들이 개장 시 한꺼번에 발동**됩니다.
3. 이 손절매 주문의 실행은 **연쇄 효과(cascading effect)**를 일으킵니다 --- 시가에서 더 멀리 설정된 손절매 주문마저 발동시키는 것입니다.

> 비유하자면, 밤새 댐에 물이 가득 차 있다가 아침에 수문을 열면, 물이 한꺼번에 쏟아져 내려오면서 하류의 더 작은 댐들까지 연쇄적으로 무너뜨리는 것과 같습니다.

또는 야간에 중요한 이벤트(뉴스, 경제 지표 발표 등)가 발생했을 수 있습니다. 다음 섹션에서 논의하듯이, 많은 유형의 뉴스 이벤트가 모멘텀을 생성합니다.

---

## 뉴스 기반 모멘텀 전략: 소식이 퍼지는 속도를 이용하라 (News-Driven Momentum Strategy)

### 왜 이것이 중요한가

여러분, 뉴스가 시장에 미치는 영향을 생각해봅시다. 많은 사람들이 믿듯이 모멘텀이 **뉴스의 느린 확산**에 의해 주도된다면, 분명히 우리는 뉴스 가치가 있는 이벤트 후 **처음 며칠, 몇 시간, 심지어 몇 초** 동안 이익을 얻을 수 있습니다.

> 마을에 우물이 하나 있는데, 그 우물물이 황금으로 변했다는 소식이 퍼진다고 상상해보세요. 우물 옆에 사는 사람이 제일 먼저 알고, 다음에 그 이웃이 알고, 점점 마을 전체로 퍼집니다. 제일 먼저 안 사람은 황금을 독차지하고, 나중에 안 사람은 이미 늦습니다. 시장에서 뉴스도 마찬가지입니다 --- 뉴스가 완전히 가격에 반영되기까지 시간이 걸리고, 그 사이에 수익 기회가 있습니다.

이것이 전통적인 **실적 발표 후 표류(Post-Earnings Announcement Drift, PEAD)** 모델과 다양한 기업 또는 거시경제 뉴스에 기반한 모델의 근거입니다.

### 실적 발표 후 표류 (Post-Earnings Announcement Drift, PEAD)

#### 현상의 발견과 지속

실적 발표가 주가를 움직일 것이라는 점은 놀랍지 않습니다. 그러나 **놀라운 것**은 이 움직임이 발표 후 **얼마 동안 같은 방향으로 지속**되어 모멘텀 트레이더들이 이익을 얻을 수 있다는 것입니다.

**더욱 놀라운 것**은 이 사실이 **1968년부터** 알려지고 연구되어 왔지만(Bernard and Thomas, 1989), 그 효과가 아직 차익거래로 사라지지 않았다는 것입니다. 이것은 금융학의 미스터리 중 하나입니다. 효율적 시장 가설에 따르면, 알려진 수익 기회는 사라져야 하는데 말이죠.

다만 표류의 **지속 기간은 단축**되었을 수 있습니다. 과거에는 며칠에서 몇 주까지 지속되던 표류가, 이제는 하루 이내로 줄어들었을 가능성이 있습니다.

#### 전략의 구체적 방법

저자가 보여주는 것은 **2011년만큼 최근**에도 이 전략이 여전히 수익성이 있다는 것입니다. 전략의 규칙은 다음과 같습니다.

1. **진입 조건**: 전날 장 마감 후 실적이 발표된 경우, 다음 날 시장 개장 시 진입합니다.
2. **방향 결정**: 야간 수익률이 매우 긍정적이면 **매수**, 매우 부정적이면 **공매도**합니다.
3. **청산**: 같은 날 장 마감 시 포지션을 청산합니다.

여기서 핵심적인 포인트를 주목하세요.

> 이 전략은 트레이더가 실적 발표가 "좋은지" "나쁜지" **해석할 필요가 없습니다**. 실적이 애널리스트 기대치보다 높은지 낮은지 **알 필요조차 없습니다**. **시장이 실적이 좋은지 나쁜지 알려주도록** 합니다.

이것은 매우 우아한 접근법입니다. 시가가 전일 종가보다 확 올랐다면, 시장 참여자들이 "이 실적은 좋다"고 판단한 것이고, 그 판단은 하루 동안 계속 같은 방향으로 모멘텀을 만듭니다. 우리는 단지 시장의 반응 자체를 읽으면 됩니다.

### 실적 캘린더 데이터 수집

이 전략을 백테스트하기 전에 **실적 발표 시간에 대한 과거 데이터**가 필요합니다. 아래의 *parseEarningsCalendarFromEarningsDotcom.m* 함수를 사용하여, 주식 심볼 배열 *allsyms*로 지정된 특정 주식 유니버스에 대해 earnings.com에서 약 1년 정도의 데이터를 검색할 수 있습니다.

이 프로그램의 **중요한 특징**은 다음과 같습니다.

- **전 거래일 장 마감 후**와 **오늘 장 개장 전**에 발생하는 실적 발표만 신중하게 선택합니다.
- 다른 시간에 발생하는 실적 발표는 오늘 장 개장 시 진입 거래의 트리거가 되어서는 안 됩니다.

왜 이렇게 까다롭게 시간을 구분할까요? 만약 장중에 실적이 발표되면, 그 효과는 이미 당일 가격에 반영되고 있을 것이므로, 다음 날 개장 시 진입하면 이미 늦기 때문입니다.

#### earnings.com에서 실적 캘린더를 검색하는 함수

이 함수는 1xN 주식 심볼 셀 배열 allsyms를 입력으로 받아 1 x N 논리 배열 earnann을 생성하는데, 이는 해당 주식이 전날 오후 4시(미국 시장 마감 시간) 이후와 오늘 오전 9시 30분(미국 시장 개장 시간) 이전에 실적 발표가 있는지 여부를 알려줍니다(true 또는 false 값으로). prevDate와 todayDate 입력은 yyyymmdd 형식이어야 합니다.

```matlab
function [earnann]= ...
 parseEarningsCalendarFromEarningsDotCom(prevDate, ...
 todayDate, allsyms)
```

**BOX 7.1**

```matlab
% [earnann]==parseEaringsCalendarFromEarningsDotCom
 % (prevDate,todayDate, allsyms)
earnann=zeros(size(allsyms));
prevEarningsFile=urlread(['http://www.earnings.com/earning ...
 .asp?date=', num2str(prevDate), '&client=cb']);
todayEarningsFile=urlread(['http://www.earnings.com ...
 /earning.asp?date=', num2str(todayDate), '&client=cb']);
prevd=day(datenum(num2str(prevDate), 'yyyymmdd'));
todayd=day(datenum(num2str(todayDate), 'yyyymmdd'));
prevmmm=datestr(datenum(num2str(prevDate), 'yyyymmdd'), ...
 'mmm');
todaymmm=datestr(datenum(num2str(todayDate), 'yyyymmdd'), ...
 'mmm');
patternSym='<a\s+href="company.asp\?ticker=([%\*\w\._ ...
 /-]+)&coid';
% prevDate
patternPrevDateTime=['<td align="center"><nobr>', ...
 num2str(prevd), '-', num2str(prevmmm), '([ :\dABPMCO]*) ...
 </nobr>'];
symA=regexp(prevEarningsFile, patternSym , 'tokens');
timeA=regexp(prevEarningsFile, patternPrevDateTime, ...
 'tokens');
symsA=[symA{:}];
timeA=[timeA{:}];
assert(length(symsA)==length(timeA));
isAMC=~cellfun('isempty', regexp(timeA, 'AMC'));
patternPM='[ ]+\d:\d\d[ ]+PM'; % e.g. ' 6:00 PM'
isAMC2=~cellfun('isempty', regexp(timeA, patternPM));
symsA=symsA(isAMC | isAMC2);
[foo, idxA, idxALL]=intersect(symsA, allsyms);
earnann(idxALL)=1;
% today
patternTodayDateTime=['<td align="center"><nobr>', ...
 num2str(todayd), '-', num2str(todaymmm), ...
 '([ :\dABPMCO]*)</nobr>'];
```

(계속)

```matlab
symA=regexp(todayEarningsFile, patternSym , 'tokens');
timeA=regexp(todayEarningsFile, patternTodayDateTime, ...
 'tokens');
symsA=[symA{:}];
timeA=[timeA{:}];
symsA=symsA(1:length(timeA));
assert(length(symsA)==length(timeA));
isBMO=~cellfun('isempty', regexp(timeA, 'BMO'));
patternAM='[ ]+\d:\d\d[ ]+AM'; % e.g. ' 8:00 AM'
isBMO2=~cellfun('isempty', regexp(timeA, patternAM));
symsA=symsA(isBMO | isBMO2);
[foo, idxA, idxALL]=intersect(symsA, allsyms);
earnann(idxALL)=1;
end
```

**코드의 핵심 로직을 요약하면:**

- 이 프로그램은 earnings.com 웹사이트에서 HTML을 가져와 정규 표현식으로 파싱합니다.
- **AMC (After Market Close)**: 전일 장 마감 후 발표된 실적을 식별합니다. 오후에 해당하는 PM 시간도 포함합니다.
- **BMO (Before Market Open)**: 오늘 장 개장 전 발표된 실적을 식별합니다. 오전에 해당하는 AM 시간도 포함합니다.
- 결과적으로, "전날 장 후 + 오늘 장 전" 발표된 실적만 골라내어 earnann 배열에 1로 표시합니다.

PEAD 전략의 백테스트에서 **각 날에 대해 이 프로그램을 호출**해야 합니다. 그런 다음 결과로 나온 1 x *N* earnann 배열들을 백테스트의 *T*일에 대한 하나의 큰 과거 *T* x *N* earnann 배열로 연결할 수 있습니다.

### 예제 7.2: PEAD 전략의 백테스트

위의 함수를 사용하든 다른 방법을 사용하든 과거 실적 발표 논리 배열을 컴파일했다고 가정하면, PEAD 전략의 실제 백테스트 프로그램은 **매우 간단**합니다.

발표가 발표 후 표류를 생성할 만큼 **"놀라운지"** 결정하기 위한 벤치마크로서, **전일 종가에서 다음 날 시가까지의 수익률의 90일 이동 표준편차**만 계산하면 됩니다. 이 표준편차가 "이 정도 갭이면 평범하다" vs "이 갭은 비정상적으로 크다"를 판단하는 기준선이 됩니다.

과거 시가와 종가가 *T* x *N* 배열 *op*와 *cl*에 저장되어 있다고 가정합니다. 입력 *T* x *N* 논리 배열 *earnann*은 주어진 날 장 개장 전이지만 전 거래일 장 마감 후에 주식에 대한 실적 발표가 있는지 여부를 나타냅니다. 유틸리티 함수 backshift, smartMovingStd와 smartsum은 epchan.com/book2에서 다운로드할 수 있습니다. 백테스트 프로그램 자체의 이름은 *pead.m*입니다.

```matlab
lookback=90;
retC2O=(op-backshift(1, cl))./backshift(1, cl);
stdC2O=smartMovingStd(retC2O, lookback);
positions=zeros(size(cl));
longs=retC2O >= 0.5*stdC2O & earnann;
shorts=retC2O <= -0.5*stdC2O & earnann;
positions(longs)=1;
positions(shorts)=-1;
ret=smartsum(positions.*(cl-op)./op, 2)/30;
```

**코드를 한 줄씩 풀어봅시다:**

- `lookback=90`: 90일 룩백 기간을 설정합니다. "과거 90일간의 데이터를 참고하겠다"는 뜻입니다.
- `retC2O=(op-backshift(1, cl))./backshift(1, cl)`: **종가-대-시가(Close-to-Open) 수익률**을 계산합니다. "전일 종가에서 오늘 시가까지 얼마나 변했나?"를 수치로 나타냅니다.
- `stdC2O=smartMovingStd(retC2O, lookback)`: 위 수익률의 **90일 이동 표준편차**를 구합니다. 이것이 "정상 범위"의 기준입니다.
- `longs=retC2O >= 0.5*stdC2O & earnann`: 종가-대-시가 수익률이 표준편차의 0.5배 이상이고, **실적 발표가 있는 날**이면 매수합니다. 즉, "평소보다 상당히 큰 양의 갭 + 실적 발표"가 조건입니다.
- `shorts=retC2O <= -0.5*stdC2O & earnann`: 반대로, 상당히 큰 음의 갭 + 실적 발표이면 공매도합니다.
- `ret=smartsum(positions.*(cl-op)./op, 2)/30`: 시가에 진입하여 종가에 청산한 수익률을 계산하고, 전체 종목에 대해 합산한 뒤 **30으로 나눕니다**.

### 백테스트 결과

**S&P 500 주식 유니버스**에 대해 2011년 1월 3일부터 2012년 4월 24일까지의 결과입니다.

| 지표 | 수치 |
|------|------|
| **연간 수익률** | **6.7%** |
| **샤프 비율** | **1.5** |

샤프 비율 1.5는 **매우 훌륭**한 수준입니다!

![](_page_6_Figure_6.jpeg)

**그림 7.2** PEAD 전략의 누적 수익률 곡선 (Cumulative Returns Curve of PEAD Strategy)

그림 7.2를 보면 누적 수익률이 상당히 안정적으로 우상향하는 것을 확인할 수 있습니다.

**몇 가지 중요한 참고사항:**

- 해당 백테스트 기간 동안 하루 최대 포지션 수가 30개이므로 수익률 계산에서 30을 분모로 사용했습니다. 물론 최대값이 정확히 얼마가 될지 모르기 때문에 이 숫자를 사용하면 어느 정도의 **미래 참조 편향(look-ahead bias)** --- 미래에만 알 수 있는 정보를 과거 시점에서 사용하는 오류 --- 이 있습니다. 그러나 일일 최대 발표 수가 상당히 예측 가능하다는 점을 감안하면, 이것은 그리 심각한 편향이 아닙니다.
- 이것이 **일중 전략**이므로 미국 규정상 최소 **4배의 레버리지**를 적용할 수 있어, 연간 평균 수익률을 약 **27%**에 가깝게 할 수 있습니다. 일중 전략은 야간 위험이 없으므로 더 높은 레버리지가 허용되는 것입니다.

### 야간 보유의 유혹과 현실

이 포지션을 야간에 보유하면 **추가 수익이 발생하는지** 궁금할 수 있습니다.

답은 **아니오**입니다. 야간 수익률은 평균적으로 **음수**입니다.

반대로, 10년 또는 20년 전의 많은 발표된 연구 결과는 PEAD가 **하루 이상 지속**되었음을 보여주었습니다. 이는 그러한 모멘텀의 존재에 대한 인식 증가로 인해 **모멘텀 지속 기간이 단축된 예**일 수 있습니다. 마치 좋은 낚시터가 알려지면 물고기가 빨리 잡혀 없어지듯, 수익 기회가 알려지면 참여자가 늘어나 효과가 빨리 소진되는 것입니다.

더 짧은 보유 기간이 더 나은 수익을 창출할 수 있는지는 여전히 테스트가 필요합니다.

### 기타 이벤트로 인한 표류 (Drift Due to Other Events)

#### 기업 이벤트의 다양한 유형

실적 발표 외에도 발표 후 표류를 나타낼 수 있는 **다른 기업 이벤트**가 있습니다. 불완전한 목록을 나열하면 다음과 같습니다.

- **실적 가이던스(earnings guidance)**: 회사가 미래 실적에 대해 내놓는 전망
- **애널리스트 등급 및 추천 변경**: "매수"에서 "보유"로 바뀌거나 그 반대
- **동일 매장 매출(same-store sales)**: 기존 매장 기준 매출 변화 (소매업에 중요)
- **항공사 탑승률**: 항공 산업 특유의 지표

이러한 데이터의 합리적인 일일 제공자로는 **Newsware가 전달하는 Dow Jones 뉴스와이어**가 있는데, 각 기사에 이벤트 유형에 특정한 코드가 첨부되어 있고 기계 판독이 가능하기 때문입니다.

이론적으로, 기업의 **공정 시장 가치 재평가**를 촉발하는 모든 발표는 새로운 균형 가격을 향해 주가 변화를 유도해야 합니다. 이러한 모든 이벤트와 주식의 이벤트 후 수익률에 대한 영향에 대한 최근의 포괄적인 연구는 Hafez, 2011을 참조하십시오.

#### 인수합병 (M&A) 이벤트

이러한 이벤트 중에서 **인수합병(M&A)**은 물론 인수자와 피인수자 기업에 대한 심층적인 펀더멘털 지식을 보유한 전문 헤지펀드의 관심을 끕니다. 그러나 앞서 PEAD에 대해 설명한 것과 같은 **순수하게 기술적인 모델**도 인수합병에 대해 약 **3%의 연간 수익률**을 추출할 수 있습니다.

흥미로운 발견이 있습니다. 일반적인 믿음과 달리 Hafez는 **인수 발표 후 피인수자의 주가가 인수자보다 더 많이 하락**한다는 것을 발견했습니다. 보통 피인수자의 주가는 프리미엄 때문에 올라간다고 생각하는데, 이 결과는 직관에 반하는 것이어서 주목할 만합니다.

#### 지수 구성 변경의 효과

6장에서 우리는 대형 펀드의 강제 매수 또는 매도에 의해 주가의 모멘텀이 어떻게 생성되는지 설명했습니다. **인덱스 펀드**(뮤추얼이든 상장지수이든)의 경우, 잘 알려진 한 가지 유형의 강제 매수와 매도가 있습니다: **지수 구성 변경**입니다.

- 주식이 **지수에 추가**되면 -> **매수 압력** 예상 (인덱스 펀드들이 새 구성종목을 사야 하므로)
- 주식이 **지수에서 삭제**되면 -> **매도 압력** 예상 (인덱스 펀드들이 기존 보유분을 팔아야 하므로)

> 마치 학교 야구팀에 새 선수가 뽑히면 그 선수의 인기(가격)가 올라가고, 탈락하면 인기가 떨어지는 것과 비슷합니다. 특히 이 경우는 "인기"가 아니라 기계적인 수급 변화 때문이라 더 예측 가능합니다.

이러한 **지수 리밸런싱 거래**도 발표된 변경 직후 모멘텀을 생성합니다. 일부 연구자들은 그러한 모멘텀이 과거에는 여러 날 지속되었다고 보고했지만, 더 최근 데이터를 사용한 저자의 테스트에 따르면 **표류 기간이 일중으로 단축**되었습니다(Shankar and Miller, 2006).

#### 거시경제 이벤트

예정된 발표로 인한 모멘텀에 관해서, **연방공개시장위원회(FOMC)**의 금리 결정이나 최신 **소비자물가지수(CPI)** 발표와 같은 거시경제 이벤트의 영향은 어떨까요?

저자는 **EURUSD에 대한 효과**를 테스트했지만, 불행히도 **유의미한 모멘텀을 발견하지 못했습니다**.

그러나 Clare와 Courtenay는 **영국 거시경제 데이터 발표와 영란은행 금리 발표**가 발표 후 최소 10분까지 GBPUSD에 모멘텀을 유발했다고 보고했습니다(Clare and Courtenay, 2001). 이 결과는 1999년까지의 데이터를 기반으로 했으므로, 모멘텀이 계속 존재한다면 최근 몇 년 동안 이 모멘텀의 **지속 기간이 더 짧아졌을 것**으로 예상해야 합니다.

이것은 하나의 일반적인 패턴을 보여줍니다. **알려진 수익 기회의 지속 시간은 시간이 지남에 따라 점점 짧아집니다.** 더 많은 사람이 같은 기회를 이용하려 하기 때문입니다.

---

## 레버리지 ETF 전략: 코끼리의 리밸런싱을 이용하라 (Leveraged ETF Strategy)

### 왜 이것이 중요한가

이 섹션은 매우 흥미로운 전략을 다룹니다. 대형 레버리지 ETF들이 매일 수행해야 하는 기계적인 리밸런싱이, 예측 가능한 모멘텀을 만들어낸다는 것입니다. 마치 코끼리가 매일 같은 시간에 수영장에 들어가는 것을 알면, 그 출렁임을 예측하고 서핑을 할 수 있는 것과 같습니다.

### 레버리지 유지의 메커니즘

**MSCI US REIT 지수(RMZ)**를 추종해야 하는 주식 포트폴리오를 가지고 있다고 상상해보십시오. 다만 특히 **장 마감 시 포트폴리오의 레버리지를 3으로 유지**하고자 합니다.

이 일정한 레버리지 요구 사항은 **직관에 반하는 중요한 결과**를 가져옵니다. 구체적인 예를 들어보겠습니다.

**시나리오 1: RMZ가 어느 날 급락한 경우**

여러분의 포트폴리오가 1억 달러의 자본에 3배 레버리지로 3억 달러어치의 주식을 보유하고 있다고 합시다. RMZ가 5% 하락하면:
- 주식 가치: 3억 -> 2.85억 달러 (1,500만 달러 손실)
- 자본: 1억 -> 8,500만 달러 (3배 레버리지로 4,500만 달러 손실이지만, 차입금은 고정이므로 자본에서 차감)
- 새로운 3배 레버리지 유지를 위한 적정 주식 보유: 8,500만 x 3 = 2.55억 달러
- **따라서 2.85억 - 2.55억 = 3,000만 달러어치의 주식을 매도해야 합니다!**

**시나리오 2: RMZ가 어느 날 급등한 경우**

반대로 RMZ가 올랐다면, 레버리지를 유지하기 위해 **주식을 매수**해야 합니다.

> 핵심을 정리하면: **시장이 올라가면 -> 더 사야 하고**, **시장이 내려가면 -> 더 팔아야** 합니다. 이것은 본질적으로 **모멘텀을 강화하는 행동**입니다!

### 실제 레버리지 ETF에서의 효과

이제 여러분이 실제로 ETF 스폰서이고, 그 포트폴리오가 **DRN**(부동산 ETF)과 같은 **3배 레버리지 ETF**이며, 그 자본이 **1억 달러 이상**이라고 가정합시다. 장 마감 근처에서 이 리밸런싱 절차(포트폴리오 수익률이 음수일 때 구성 주식을 매도하고 그 반대의 경우도 마찬가지)가 포트폴리오의 시장 가치에 **모멘텀을 생성**할 것이라고 생각한다면, 여러분이 옳습니다.

**중요한 추가 설명:** 시장 지수의 큰 변화는 레버리지 **롱** 또는 **숏** ETF 모두에서 **같은 방향**으로 모멘텀을 생성합니다. 왜일까요?

- 시장이 크게 **상승**하면: 롱 ETF는 더 매수해야 하고, 숏(인버스) ETF는 자본 감소를 경험하여 숏 포지션을 **줄여야** 합니다. 숏 포지션을 줄인다는 것은 곧 **주식을 매수**하는 것입니다.
- 결과: **양쪽 모두 같은 방향(매수)으로 행동**합니다.

### 전략 구성과 백테스트

우리는 매우 간단한 모멘텀 전략을 구성하여 이 가설을 테스트할 수 있습니다.

**전략 규칙:**

1. **전일 종가에서 장 마감 15분 전까지의 수익률**이 **+2%보다 크면** DRN을 **매수**합니다.
2. **수익률이 -2%보다 작으면** DRN을 **매도**합니다.
3. **장 마감 시** 포지션을 **청산**합니다.

이 모멘텀 전략은 기초 주식의 모멘텀에 기반하므로 SPY와 같은 **비레버리지 ETF의 장 마감 근처 수익률**에도 영향을 미쳐야 한다는 점에 유의하십시오. 우리는 단순히 **효과를 확대**하기 위해 레버리지 ETF를 거래 수단으로 사용합니다. 3배 레버리지이니 효과가 3배로 증폭되는 셈입니다.

**백테스트 결과 (DRN 거래):**

| 지표 | 수치 |
|------|------|
| 테스트 기간 | 2011년 10월 12일 ~ 2012년 10월 25일 |
| **연간 수익률** | **15%** |
| **샤프 비율** | **1.8** |

샤프 비율 1.8은 이 장에서 소개하는 전략들 중에서도 가장 높은 수준입니다!

### 전략 수익의 원동력: AUM 규모

당연히 이 전략의 수익률은 모든 **레버리지 ETF의 총 자산이 증가**함에 따라 증가해야 합니다. 코끼리가 더 커지면 출렁임도 더 커지는 것과 같은 원리입니다.

2009년 1월 말 레버리지 ETF(롱 및 숏 펀드 모두 포함)의 총 **운용자산(AUM)**이 **190억 달러**라고 보고되었습니다(Cheng and Madhavan, 2009). 이 저자들은 또한 SPX의 **1% 움직임**이 장 마감 거래량의 약 **17%를 구성하는 주식의 매수 또는 매도**를 필요로 할 것으로 추정했습니다. 이것은 명백히 상당한 **시장 충격(market impact)** --- 대규모 주문이 가격 자체를 움직이는 현상 --- 을 가질 것이며, 이것이 바로 모멘텀을 유발하는 원인입니다.

(더 최신의 분석은 Rodier, Haryanto, Shum, and Hejazi, 2012에 의해 발표되었습니다.)

### 투자자 자금 흐름의 중화 효과

물론 레버리지 여부와 관계없이 ETF의 자본에 영향을 미치는 또 다른 이벤트가 있습니다: **투자자 자금의 흐름**입니다.

- **롱 레버리지 ETF로의 대규모 유입** -> 기초 주식 가격에 **양의 모멘텀** 유발
- **숏 레버리지("인버스") ETF로의 대규모 유입** -> **음의 모멘텀** 유발

따라서 이론적으로 시장 지수가 큰 양의 수익률을 기록한 같은 날, 많은 투자자들이 롱 레버리지 ETF를 매도할 수 있습니다(아마도 평균 회귀 전략의 일부로). 이것은 모멘텀을 **중화**시켰을 것입니다.

그러나 우리의 백테스트는 이것이 **자주 발생하지 않았음**을 보여줍니다. 즉, 리밸런싱 효과가 투자자 자금 흐름 효과보다 대체로 더 강하다는 뜻입니다.

---

## 고빈도 전략: 시장의 현미경적 구조를 이용하라 (High-Frequency Strategies)

### 왜 이것이 중요한가

여러분, 이제 우리는 가장 짧은 시간 척도의 세계로 들어갑니다. 고빈도 거래(HFT)의 세계는 **시장 미시구조(market microstructure)** --- 시장의 현미경적 구조, 즉 호가, 주문서, 체결 메커니즘 등 시장이 실제로 작동하는 미세한 수준의 구조 --- 에 대한 깊은 이해를 필요로 합니다.

### 기본 아이디어: 호가 수량 불균형

대부분의 고빈도 모멘텀 전략은 **주문서(order book)** --- 매수 호가와 매도 호가가 수량과 함께 줄지어 서 있는 대기열 --- 에서 정보를 추출하는 것을 포함하며, 기본 아이디어는 간단합니다.

> **매수 호가 수량이 매도 호가 수량보다 훨씬 크면** -> 가격이 **상승**할 것으로 예상
> **매도 호가 수량이 매수 호가 수량보다 훨씬 크면** -> 가격이 **하락**할 것으로 예상

마치 놀이공원 입구에서 들어가려는 줄이 나오려는 줄보다 훨씬 길면, 안에 있는 자리(재화)의 가치가 올라갈 것이라고 예측하는 것과 같습니다.

이 아이디어는 **학술 연구로 뒷받침**됩니다.

- **나스닥 시장**에서 매수 대 매도 호가 수량의 불균형과 단기 가격 변화 사이에 **대략적인 선형 관계**가 발견되었습니다(Maslov and Mills, 2001).
- 예상대로 이 효과는 **거래량이 적은 주식에서 더 강합니다**. 유동성이 낮은 곳에서 수급 불균형이 더 큰 가격 변동을 야기하는 것은 당연합니다.
- 이 효과는 **전국 최우선 매수매도호가(National Best Bid Offer, NBBO)** --- 모든 거래소를 통틀어 가장 좋은 매수/매도 가격 --- 에만 국한되지 않습니다. **전체 주문서의 불균형**도 스톡홀름 주식 시장의 주식에 대해 가격 변화를 유발합니다(Hellstrom and Simonsen, 2006).

이 현상에 기반한 여러 고빈도 모멘텀 전략이 있습니다. 이들 중 다수는 시장 미시구조 또는 고빈도 거래에 관한 책에서 설명되었습니다(Arnuk and Saluzzi, 2012; Durbin, 2010; Harris, 2003; Sinclair, 2010).

이어지는 설명에서는 초기 **롱 거래**에 초점을 맞추지만, 물론 숏 측에서 대칭적인 기회가 있습니다.

### 비율 거래: 비례 배분 시장에서의 편승 (Ratio Trade)

**CME에서 거래되는 유로달러 선물**과 같이 **비례 배분(pro-rata)** --- 주문 크기에 비례하여 체결량을 배정하는 --- 방식으로 주문을 체결하는 시장에서, 호가 수량 불균형으로부터 이익을 얻는 가장 간단한 방법은 다음과 같습니다.

1. 즉시 **"매수 호가에 참여"**하여, 매수 측에서 체결이 있을 때마다 그 체결의 일부를 배정받습니다.
2. 단, 원래 **매수 호가 수량이 매도 호가 수량보다 훨씬 클 때만** 매수 호가에 참여합니다. 이렇게 해야 체결 후 매수-매도 호가가 하락보다 **상승할 가능성이 더 높기** 때문입니다.

이것을 **비율 거래(ratio trade)**라고 하는데, 원래 주문의 체결 비율이 우리 자신의 주문 크기와 매수 호가의 총 주문 크기 사이의 **비율**과 같을 것으로 예상하기 때문입니다.

**수익 시나리오:** 매수 압력이 매수 호가를 한 틱 이상 올리면, 우리는 수익을 내며 매도할 수 있거나, 단순히 최우선 매도 호가에 매도 주문을 넣을 수 있습니다(매수-매도 스프레드가 주당 왕복 수수료보다 큰 경우).

**손실 제한 시나리오:** 매수 호가가 상승하지 않거나 매도 지정가 주문이 체결되지 않으면, 큰 매수 호가 수량 때문에 아마도 원래 최우선 매수 호가에서 매도할 수 있으며, **수수료 손실만** 발생합니다.

### 틱킹 / 호가 매칭: 스프레드 사이의 민첩한 매매 (Ticking / Quote Matching)

**매수-매도 스프레드가 2틱보다 큰** 시장에서는 상승을 예상하여 이익을 얻는 또 다른 간단한 거래가 있습니다.

**전략 단계:**

1. **최우선 매수 호가에 1틱을 더한 가격**에 매수 주문을 넣습니다. (기존 매수 호가보다 1틱 높은 가격을 제시하므로, 우리가 새로운 최우선 매수자가 됩니다.)
2. 이것이 체결되면, **최우선 매도 호가에서 1틱을 뺀 가격**에 매도 주문을 넣고 체결되기를 기다립니다.
3. **성공하면:** 최소 1틱의 수익을 얻습니다 (원래 스프레드가 2틱 초과이므로).
4. **실패하면:** 원래 최우선 매수 호가에서 매도할 수 있으며, **수수료에 1틱을 더한 손실**이 발생합니다.

이것을 **틱킹(ticking)** 또는 **호가 매칭(quote matching)**이라고 합니다. 이 전략이 수익성이 있으려면 **주당 왕복 수수료가 매수-매도 스프레드에서 2틱을 뺀 것보다 작아야** 합니다.

![](_page_10_Figure_5.jpeg)

**그림 7.3** 틱킹 전략. 원래 스프레드는 2틱보다 커야 합니다. 매수 주문이 B에서 체결된 후, 우리는 최소 1틱의 수익을 위해 S에서 매도하려고 시도할 것입니다. 그러나 매도 주문이 체결되지 않으면 S'에서 1틱 손실로 매도할 것입니다. (Ticking Strategy. The original spread must be greater than two ticks. After the buy order is filled at B, we will try to sell it at S for a profit of at least one tick. But if the sell order cannot be filled, then we will sell it at S' at a loss of one tick.)

그림 7.3을 보면 이 과정이 시각적으로 명확하게 나타납니다. 핵심은 원래 스프레드가 충분히 넓어야 (2틱 초과) 그 사이에서 수익 공간을 만들 수 있다는 점입니다.

#### 틱킹의 위험

틱킹은 물론 **완벽한 전략이 아닙니다**. 두 가지 주요 위험이 있습니다.

1. **원래 매수 호가 취소**: 선행 매매(front-run)되기 전의 원래 최우선 매수 호가는, 트레이더가 선행 매매당했다는 것을 알면 **취소**될 수 있습니다. 그러면 우리가 재고를 처분할 더 낮은 매수 호가만 남게 됩니다.

2. **함정(trap)**: 전체 상황이 우리를 위한 함정으로 설정되었을 수 있습니다. 원래 최우선 매수 호가를 넣은 트레이더가 실제로 자신의 매수 호가보다 **더 좋은 가격에 우리에게 주식을 팔고 싶어했을 수 있습니다**. 그래서 우리가 1틱을 더해 그의 주식을 산 후, 그는 즉시 매수 호가를 취소할 것입니다. 우리는 사실 그의 판매 의도에 이용당한 것입니다.

### 모멘텀 점화와 플리핑: 허풍의 전쟁 (Momentum Ignition and Flipping)

기존의 매수 압력이나 매수-매도 호가 수량 불균형이 없더라도, 우리는 그러한 것의 **환상을 만들 수 있습니다**. 이것을 종종 **모멘텀 점화(momentum ignition)**라고 부릅니다.

> 비유하자면, 빈 극장에서 "불이야!"라고 외치는 것과 비슷합니다. 실제 불은 없지만, 사람들이 패닉 상태에서 한 방향으로 몰리는 것을 이용하는 것입니다. 물론 이것은 윤리적으로 문제가 있을 수 있지만, 시장에서 실제로 일어나는 현상입니다.

이것은 비례 배분 체결 대신 **시간 우선순위**를 사용하는 시장에서 작동합니다. 구체적인 방법은 다음과 같습니다.

**전제 조건:** 최우선 매수 및 매도 호가 수량이 매우 유사한 상태

**실행 단계:**

1. 매수 압력의 인상을 주기 위해 최우선 매수 호가에 **대량 매수 지정가 주문**을 넣습니다.
2. 동시에 최우선 매도 호가에 **소량 매도 지정가 주문**을 넣습니다.
3. 다른 트레이더들이 상승을 예상하여 매도 호가에서 매수하도록 **"속입니다"** -> 우리의 소량 매도 주문이 체결됩니다.
4. 이 시점에서 즉시 **대량 매수 주문을 취소**합니다.
5. 최우선 매수-매도 호가 수량은 이제 다시 거의 같아집니다.
6. 큰 매수 압력을 기대하며 일찍 매수한 트레이더들 중 많은 이가 이제 **손실을 보고 자신의 보유 주식을 다시 매도**할 수 있습니다.
7. 우리는 그것을 **원래 최우선 매수 호가에서 살 수 있습니다**.

이것을 **플리핑(flipping)**이라고 합니다.

#### 플리핑의 위험과 대응

매수 압력의 환상을 만드는 것에는 위험이 있습니다 --- 누군가가 우리의 **허풍을 불러 실제로 우리의 대량 매수 주문을 체결시킬 수 있습니다**. 이 경우, 우리는 원하지 않는 대량 포지션을 떠안고 **손실을 보고 매도**해야 할 수 있습니다.

반대로, **대량 매수 주문이 플리퍼 때문이라고 의심되면**, 우리는 다음과 같이 대응할 수 있습니다.

1. 플리퍼에게 주식을 **매도**하고 매수 호가를 낮춥니다.
2. 플리퍼들이 **항복하고 새로운 재고를 매도**하여 매도 호가도 낮추기를 기다립니다.
3. 그래서 우리가 **원래 매수 호가 아래에서 숏 포지션을 청산**할 수 있습니다.

**플리퍼를 탐지하는 방법:** 처음부터 대량 매수 주문이 플리퍼 때문이라는 것을 어떻게 알 수 있을까요? **대량 매수 호가가 체결되는 대신 취소되는 빈도를 기록**해야 할 수 있습니다. 나스닥의 **ITCH**, Direct Edge의 **EDGX Book Feed**, 또는 BATS의 **PITCH** 피드와 같은 거래소의 **비공개 데이터 피드**에 가입하면, 수정이나 부분 체결을 포함한 주문의 상세한 이력을 받을 수 있습니다(Arnuk and Saluzzi, 2012). 이러한 정보는 플리퍼를 탐지하는 데도 도움이 될 수 있습니다.

### 군비 경쟁의 결말: 속도 게임의 한계

이러한 모든 전략과 그 방어, 허풍, 역허풍은 하나의 일반적인 요점을 보여줍니다.

> **고빈도 트레이더는 더 느린 트레이더에게서만 수익을 낼 수 있습니다.** 시장에 고빈도 트레이더만 남으면, 모든 사람의 순 평균 수익은 **0**이 될 것입니다.

이것은 포커 게임과 비슷합니다. 초보자가 있어야 고수가 돈을 벌 수 있는 것이죠.

실제로, 대량 매수 또는 매도 주문을 "선행 매매"하는 이러한 유형의 고빈도 전략의 확산으로 인해, 많은 전통적인 **시장조성자(market maker)**들은 더 이상 대량 호가를 제시하지 않습니다. 이로 인해 많은 시장에서 **NBBO 수량이 전반적으로 감소**했습니다.

구체적인 예를 들면:

| 종목 | 상황 |
|------|------|
| **AAPL** (유동성 높은 주식) | NBBO 수량이 종종 **몇 백 주**에 불과 |
| **SPY** (가장 유동성 높은 ETF, ARCA) | NBBO 수량이 종종 **10,000주 미만** |

이 작은 주문들이 체결된 후에야 시장조성자는 고빈도 트레이더에게 이용당하는 것을 피하기 위해 같은 가격에 다시 호가를 제시합니다. 물론 대량 호가 표시를 피하는 다른 이유도 있습니다 --- 시장조성자들은 대량 호가가 체결되어 발생할 수 있는 **대량 재고를 유지하고 싶어하지 않습니다**.

마찬가지로, 이전에는 **대량 거래(block trades)**로 실행되었던 대형 기관 주문은 이제 작은 **자식 주문(child orders)** --- 하나의 큰 주문을 여러 개의 작은 주문으로 쪼갠 것 --- 으로 나뉘어져 다양한 시장 거래소에 분산되어 하루 종일 실행됩니다. 이것은 고빈도 트레이더의 선행 매매를 방지하기 위한 대응 조치입니다.

### 스탑 헌팅: 손절매의 지뢰밭을 이용하라 (Stop Hunting)

**스탑 헌팅(Stop hunting)**은 또 다른 인기 있는 고빈도 모멘텀 전략입니다. 이 전략의 배경을 이해하기 위해, 관련 학술 연구를 살펴봅시다.

통화 시장에 대한 연구는 **지지선(support)이 돌파되면 가격이 한동안 더 하락**하고, **저항선(resistance)이 돌파되면 가격이 한동안 더 상승**한다는 것을 나타냈습니다(Osler, 2000, 2001).

이러한 **지지선과 저항선**은 다음과 같은 것일 수 있습니다.

- **은행이나 증권사가 매일 보고하는 기술적 수준**
- **현재 가격 수준 근처의 라운드 넘버** (예: 1.3000, 1.2500 등 깔끔한 숫자)

이 단기 가격 모멘텀은 지지선과 저항선 수준 또는 그 근처에 배치된 **다수의 손절매 주문** 때문에 발생합니다.

#### 메커니즘의 상세 설명

지지선만 살펴보겠습니다 (저항선의 상황은 대칭적입니다).

1. 가격이 지지선을 돌파할 만큼 충분히 **하락**합니다.
2. 해당 **매도 손절매 주문이 발동**되어 가격을 더 하락시킵니다.
3. 이 하락이 또 다른 손절매를 발동시키며 **연쇄 효과**가 발생합니다.

> 이것은 눈덩이가 산을 굴러 내려오는 것과 같습니다. 처음에는 작지만, 갈수록 커지며 더 많은 눈(손절매 주문)을 끌어들입니다.

이 지식을 바탕으로, 고빈도 트레이더는 물론 가격이 지지선에 충분히 가까울 때 **대량 매도 주문을 제출**하여 인위적인 매도 압력을 만들어 다음 틱을 하락시키려고 할 수 있습니다. 손절매 주문이 발동되고 하락 모멘텀이 진행되면, 이 고빈도 트레이더들은 빠른 수익을 위해 **숏 포지션을 청산**할 수 있습니다.

마치 도미노의 첫 번째 조각을 고의로 넘어뜨리고, 연쇄 반응이 일어나는 동안 수익을 챙기는 것입니다.

### 주문 흐름: 시장의 혈류를 읽다 (Order Flow)

시장의 **주문 흐름(order flow)** 정보에 접근할 수 있다면, 일반적인 매수/매도/최종 가격 스트림을 넘어서는 **매우 가치 있는 정보 스트림**을 갖게 됩니다.

Lyons가 통화 거래의 맥락에서 논의했듯이(Lyons, 2001), **"주문 흐름"은 부호가 있는 거래량**입니다.

- 트레이더가 딜러/시장조성자/주문서에서 100단위를 **매수**하면 -> 주문 흐름은 **+100**
- 트레이더가 대신 100단위를 **매도**하면 -> 주문 흐름은 **-100**
- 주문서에서 "매수"한다는 것은 트레이더가 **매도 호가에서 매수**하거나, 동등하게 트레이더가 **매수를 위한 시장가 주문을 제출**한다는 것을 의미합니다.

> 주문 흐름을 강의 흐름에 비유해봅시다. 물(거래)이 한 방향으로 세차게 흐르면, 하류(미래 가격)가 그 방향으로 움직일 가능성이 높습니다. 주문 흐름은 이 물줄기의 방향과 세기를 측정하는 것입니다.

#### 왜 주문 흐름이 가격을 예측하는가

실증 연구는 주문 흐름 정보가 **가격 움직임의 좋은 예측 변수**임을 나타냅니다. 이유는 다음과 같습니다.

시장조성자가 주문 흐름 정보에서 중요한 **펀더멘털 정보**를 추출하고 그에 따라 매수-매도 가격을 설정할 수 있기 때문입니다.

**구체적 예시:** 주요 헤지펀드가 중요한 속보에 대해 방금 알게 되면, 그들의 알고리즘은 순식간에 같은 부호의 **대량 시장가 주문**을 제출할 것입니다. 주문 흐름을 모니터링하는 시장조성자는 그러한 대규모 일방향 수요가 **정보를 가진 트레이더의 존재**를 나타낸다고 매우 정확하게 추론하고, 자신을 보호하기 위해 즉시 매수-매도 가격을 조정할 것입니다.

핵심 포인트: **시장가 주문 사용의 긴급성은 정보가 새롭고 널리 알려지지 않았음을 나타냅니다.** 만약 모두가 아는 정보라면 굳이 시장가(더 비싼 방식)로 급하게 매매할 필요가 없기 때문입니다.

#### 주문 흐름 정보에 접근하는 방법

우리 대부분은 대형 시장조성자나 거래소 운영자가 아니므로, 어떻게 그러한 주문 흐름 정보에 접근할 수 있을까요?

**주식과 선물 시장의 경우:**
- 모든 **틱** --- 최우선 매수, 매도 및 거래 가격과 수량의 변화 --- 을 모니터링하고 기록합니다.
- 거래가 **매수 호가**에서 발생했는지 (음의 주문 흐름) **매도 호가**에서 발생했는지 (양의 주문 흐름) 결정합니다.

**통화 시장의 경우:**
- 대부분의 딜러가 거래 가격을 보고하지 않기 때문에 **어렵습니다**.
- 이 전략을 위해 **통화 선물 거래**에 의존해야 할 수 있습니다.

거래당 주문 흐름이 계산되면, **일정 룩백 기간 동안의 누적 또는 평균 주문 흐름**을 쉽게 계산하여 가격이 상승할지 하락할지 예측하는 데 사용할 수 있습니다.

---

## 핵심 요점 (KEY POINTS)

이 장에서 다룬 핵심 내용을 정리하면 다음과 같습니다.

1. **일중 모멘텀 전략은 일간 모멘텀 전략의 많은 단점을 겪지 않으면서 몇 가지 주요 장점을 유지합니다.** 하루 안에 거래를 완료하므로 야간 위험이 없고, 거래 빈도가 높아 통계적 유의성이 높습니다.

2. **"돌파(breakout)" 모멘텀 전략은 가격이 거래 범위를 초과하는 것을 포함합니다.** 가격이 기존 범위를 벗어나면 그 방향으로 계속 움직이는 경향이 있습니다.

3. **시가 갭 전략은 일부 선물과 통화에서 작동하는 돌파 전략입니다.** FSTX에서 샤프 비율 1.4, GBPUSD에서 1.3을 기록했습니다.

4. **돌파 모멘텀은 손절매 주문의 발동에 의해 야기될 수 있습니다.** 손절매의 연쇄 발동이 도미노처럼 모멘텀을 강화합니다.

5. **많은 종류의 기업 및 거시경제 뉴스가 단기 가격 모멘텀을 유발합니다.** PEAD 전략은 2011년에도 샤프 비율 1.5로 여전히 유효했습니다.

6. **지수 구성 변경은 지수에 추가되거나 삭제되는 주식에 모멘텀을 유발합니다.** 인덱스 펀드의 기계적 매수/매도 때문입니다.

7. **장 마감 근처의 레버리지 ETF 리밸런싱은 전일 종가로부터의 시장 수익률과 같은 방향으로 기초 지수에 모멘텀을 유발합니다.** DRN 거래에서 샤프 비율 1.8을 기록했습니다.

8. **많은 고빈도 모멘텀 전략은 매수-매도 호가 수량 간의 불균형을 포함하며**, 이 불균형은 때때로 고빈도 트레이더 자신에 의해 인위적으로 만들어집니다 (모멘텀 점화, 플리핑).

9. **스탑 헌팅은 일반적으로 현재 시장 가격 근처의 라운드 넘버에 집중된 손절매 주문을 발동시키는 것에 의존하는 고빈도 거래 전략입니다.**

10. **주문 흐름은 같은 방향으로의 단기 가격 움직임을 예측할 수 있습니다.** 시장가 주문의 방향과 크기가 정보를 가진 트레이더의 존재를 나타내기 때문입니다.

---

## 용어 사전 (Glossary)

| 용어 (한국어) | 영어 | 설명 |
|---|---|---|
| **일중 모멘텀 전략** | Intraday Momentum Strategy | 하루 안에 포지션을 열고 닫는, 단기 추세 추종 전략. "하루 안의 짧은 파도 타기"에 비유할 수 있습니다. |
| **샤프 비율** | Sharpe Ratio | 위험(변동성) 대비 초과 수익의 효율을 측정하는 지표. 1.0 이상이면 우수, 2.0 이상이면 매우 우수합니다. |
| **돌파 전략** | Breakout Strategy | 가격이 기존 거래 범위(지지선/저항선)를 넘어설 때 그 방향으로 진입하는 전략. 손절매 연쇄 발동이 핵심 동력입니다. |
| **손절매 주문** | Stop Order | 미리 정한 가격에 도달하면 자동으로 실행되는 주문. 연쇄 발동 시 도미노 효과를 만들어 모멘텀을 강화합니다. |
| **실적 발표 후 표류 (PEAD)** | Post-Earnings Announcement Drift | 실적 발표 후 주가가 발표 방향으로 계속 움직이는 현상. 1968년부터 알려졌지만 여전히 존재합니다. |
| **레버리지 ETF** | Leveraged ETF | 기초 지수의 일일 수익률을 2배 또는 3배로 추종하도록 설계된 펀드. 일일 리밸런싱이 시장 모멘텀을 유발합니다. |
| **시장 미시구조** | Market Microstructure | 시장의 현미경적 구조 --- 호가, 주문서, 체결 메커니즘 등 시장이 작동하는 미세한 수준의 구조. |
| **고빈도 거래 (HFT)** | High-Frequency Trading | 번개처럼 빠른 속도로 밀리초 이하 단위의 매매를 수행하는 거래 방식. 주문서 정보를 핵심적으로 활용합니다. |
| **주문 흐름** | Order Flow | 부호가 있는 거래량. 매수자가 시작한 거래는 양수, 매도자가 시작한 거래는 음수. "주문의 물줄기"에 비유됩니다. |
| **주문서** | Order Book | 매수 호가와 매도 호가가 가격별로 수량과 함께 정렬된 대기열. 시장의 수급을 한눈에 보여줍니다. |
| **비율 거래** | Ratio Trade | 비례 배분 시장에서 매수 호가 수량이 클 때 매수 호가에 참여하여 체결 비율만큼 배정받는 전략. |
| **틱킹 / 호가 매칭** | Ticking / Quote Matching | 스프레드가 넓은 시장에서 최우선 호가보다 1틱 유리한 가격을 제시하여 스프레드 안에서 수익을 추구하는 전략. |
| **모멘텀 점화** | Momentum Ignition | 대량 주문으로 매수/매도 압력의 환상을 만들어 다른 트레이더들을 속이는 전략. 윤리적 논란이 있습니다. |
| **플리핑** | Flipping | 모멘텀 점화 후 반대 포지션으로 전환하여 속은 트레이더들의 반대매매로부터 수익을 얻는 전략. |
| **스탑 헌팅** | Stop Hunting | 지지선/저항선 근처에 몰린 손절매 주문을 의도적으로 발동시켜 연쇄 모멘텀으로부터 수익을 얻는 전략. |
| **NBBO** | National Best Bid Offer | 전국 최우선 매수매도호가. 모든 거래소를 통틀어 가장 좋은 매수 가격과 매도 가격. |
| **미래 참조 편향** | Look-Ahead Bias | 백테스트에서 미래에만 알 수 있는 정보를 과거 시점의 의사결정에 사용하는 오류. 결과를 과대평가하게 만듭니다. |
| **시장 충격** | Market Impact | 대규모 주문이 가격 자체를 원하지 않는 방향으로 움직이게 하는 현상. 주문 크기가 클수록 충격도 큽니다. |
| **자식 주문** | Child Orders | 하나의 큰 주문을 여러 작은 주문으로 쪼개어 분산 실행하는 것. 시장 충격을 줄이기 위한 방법입니다. |
