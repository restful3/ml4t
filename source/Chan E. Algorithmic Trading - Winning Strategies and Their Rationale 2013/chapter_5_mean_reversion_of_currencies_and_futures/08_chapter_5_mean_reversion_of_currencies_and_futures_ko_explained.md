---
lang: ko
format:
  html:
    toc: true
    embed-resources: true
    theme: cosmo
---

# 제5장: 통화와 선물의 평균 회귀 — 쉬운 해설판

> 이 글은 Ernest Chan의 "Algorithmic Trading" 제5장의 전체 내용을 빠짐없이 담되, 전문 용어와 개념을 일상적인 비유와 풀어쓴 설명으로 재구성한 해설판입니다.

---

## 도입: 통화와 선물에서 평균 회귀가 정말 가능한가?

여러분, 지금까지 우리는 주식과 ETF에서 평균 회귀 전략을 살펴봤습니다. 이번 장에서는 무대를 바꿔서 **통화(currencies)**와 **선물(futures)**의 세계로 들어갑니다. 솔직히 말하면, 이 영역은 전통적으로 **모멘텀 트레이더(momentum traders)** — 가격이 오르면 더 사고, 내리면 더 파는 추세 추종 트레이더들 — 의 놀이터입니다.

왜 그럴까요? 대부분의 **CTA(Commodities Trading Advisors, 상품거래자문업자)** — 쉽게 말해 선물과 통화를 전문적으로 거래하는 펀드 매니저들 — 는 모멘텀 기반 전략을 씁니다. 또한 대부분의 통화 쌍이나 선물 쌍은 **공적분(cointegration)**하지 않고, 대부분의 통화/선물 포트폴리오는 **횡단면 평균회귀(cross-sectional mean reversion)**를 보이지 않는다는 것도 사실입니다.

그렇다면 왜 이 장을 읽어야 할까요? **기회가 제한적이긴 하지만, 존재하지 않는 건 아니기 때문입니다!** 마치 사막에서 오아시스를 찾는 것처럼, 알아야 할 곳을 알면 수익성 있는 평균 회귀 기회를 통화와 선물에서도 발견할 수 있습니다.

이 장에서 우리는 다음을 탐구합니다:

- **통화 교차환율 거래**: 마치 환전소에서 삼각 거래를 하듯, 서로 다른 통화 쌍을 결합하는 방법
- **선물 캘린더 스프레드(futures calendar spreads)** 거래: 같은 상품이지만 만기가 다른 선물을 짝지어 거래하는 방법. 평균회귀가 규칙이 아닌 예외인 상황이죠.
- **선물 시장간 스프레드(futures intermarket spread)**: 특히 변동성 선물 대 주가지수 선물이라는 독특한 조합

또한 선물 가격의 수학적 모델을 통해 **현물 수익률(spot return)** 대 **롤 수익률(roll return)**, 그리고 **백워데이션(backwardation)** 대 **콘탱고(contango)**가 무엇인지 이해하게 됩니다. 이 모델을 이해하면 임시적인 기술적 지표에 의존하지 않고, 새로운 선물 거래 전략을 제안하는 데 도움이 됩니다.

마지막으로, 통화 거래에는 주식 트레이더에게 낯선 **뉘앙스**들이 있습니다. 예를 들어, 통화의 공적분을 테스트하거나 통화 포트폴리오의 수익률을 계산할 때, 한 통화 쌍의 포인트 움직임이 다른 통화 쌍의 포인트 움직임과 **같은 달러 가치**를 갖도록 주의해야 합니다. 마치 킬로그램과 파운드를 섞어서 비교하면 안 되는 것처럼요! 그렇지 않으면 결과가 의미 없습니다. 또한 **롤오버 이자(rollover interests)**가 때때로 총 수익률을 결정하는 데 중요한 역할을 할 수 있다는 점도 이 장에서 다룹니다.

---

## 통화 교차환율 거래: 환전소 삼각 거래의 비밀

### 왜 통화 쌍을 거래할까?

외환에서 **정상 포트폴리오(stationary portfolio)** — 즉 평균 회귀하는 포트폴리오 — 를 만드는 기본 아이디어는 사실 서로 다른 국가의 주가지수 ETF 쌍을 거래하는 것과 매우 유사합니다. 핵심은 **유사한 경제 펀더멘털을 가진 국가**를 찾는 것이죠.

비유로 설명하면, 두 나라의 경제가 쌍둥이처럼 닮았다면, 그 나라들의 통화도 마치 **시소(seesaw)**처럼 움직입니다. 한쪽이 올라가면 다른 쪽이 내려가고, 결국 균형점으로 돌아오는 거죠.

구체적인 예를 들어볼까요?

- **EWA(호주 주가지수 ETF)**와 **EWC(캐나다 주가지수 ETF)**가 공적분한다는 것을 이전 장에서 발견했습니다. 그렇다면 **AUD(호주 달러)**와 **CAD(캐나다 달러)**도 공적분할 것이라고 합리적으로 예상할 수 있습니다. 왜냐하면 두 나라 모두 자원 수출 대국이니까요!
- 호주와 남아프리카 모두 주요 광업 수입이 있으므로, **AUD**와 **ZAR(남아프리카 랜드)**도 공적분할 것으로 기대할 수 있습니다.
- 트레이더들은 이러한 통화들과 노르웨이 크로네 같은 다른 통화를 **상품 통화(commodity currencies)**라고 부릅니다.

### 통화 거래의 매력: 왜 ETF 대신 통화를?

통화 쌍을 직접 거래하면 해당 주가지수 ETF 쌍 거래에 비해 여러 가지 장점이 있습니다:

1. **높은 유동성**: 통화 시장은 세계에서 가장 큰 시장입니다. 일반적으로 통화의 유동성이 더 높아서(특히 최우선 매수/매도 호가 크기의 경우) **거래 비용이 낮습니다**. 마치 대형 마트에서 물건을 사는 것처럼, 규모가 클수록 가격이 좋습니다.
2. **높은 레버리지**: 통화에서 사용할 수 있는 레버리지가 훨씬 높습니다. 하지만 이것은 **양날의 검**입니다! 수익도 크지만 손실도 그만큼 커질 수 있으니까요. 마치 지렛대로 무거운 물건을 들 수 있지만, 삐끗하면 크게 다칠 수도 있는 것처럼요.
3. **공매도 제약 없음**: 주식에서는 공매도(빌려서 파는 것)에 다양한 규제가 있지만, 통화에는 그런 제약이 없습니다. 통화를 "판다"는 것은 단순히 다른 통화를 "산다"는 것이니까요.
4. **거의 24시간 거래**: 적어도 일요일 오후 5시(미국 동부시간, ET)부터 금요일 오후 5시(ET)까지 주 5일, 하루 24시간 거래할 수 있습니다. (ET는 EDT[동부 일광 절약 시간, GMT-4] 또는 EST[동부 표준시, GMT-5]일 수 있습니다.) 이는 통화에서 훨씬 더 많은 거래 기회가 있으며, **손절매(stop losses)**를 의미 있는 방식으로 사용할 수 있다는 뜻입니다.

손절매가 왜 중요한지 잠깐 생각해볼까요? 시장이 오랜 기간 닫혀 있으면, 시장이 다시 열릴 때 가격이 갑자기 확 뛰거나 떨어질 수 있습니다(갭 업/다운). 이런 상황에서는 손절매가 쓸모없습니다. 하지만 24시간 열려 있는 통화 시장에서는 손절매가 제대로 작동할 수 있습니다.

### 통화 거래의 기본 용어: 기준 통화와 호가 통화

ETF 쌍 거래와 개념적으로 유사함에도 불구하고, 통화 거래의 **메커니즘**은 상당히 다릅니다. 기본 용어부터 정리해볼까요.

교차환율 **AUD.ZAR**를 거래한다고 합시다. 이때:

- **AUD**는 **기준 통화(base currency)** — 앞에 오는 통화
- **ZAR**는 **호가 통화(quote currency)** — 뒤에 오는 통화

기억법이 있습니다: **B(Base)**는 알파벳순으로 **Q(Quote)** 보다 앞에 옵니다. 그래서 순서는 항상 **B.Q** 형태입니다.

만약 AUD.ZAR가 **9.58**로 호가된다면, 이것은 "1 호주 달러를 사는 데 9.58 남아프리카 랜드가 필요하다"는 뜻입니다. 마치 환전소 전광판에 "호주 달러 1개 = 랜드 9.58개"라고 적혀 있는 것과 같죠.

**100,000 AUD.ZAR를 매수**한다는 것은 무엇을 의미할까요?

- 100,000 호주 달러를 **매수**하면서
- 동시에 100,000 x 9.58 = **958,000 남아프리카 랜드를 매도**하는 것입니다

이것이 바로 통화 거래의 본질입니다: **항상 하나를 사면서 다른 하나를 팝니다.** 마치 시소의 한쪽을 올리면 다른 쪽이 내려가는 것처럼요.

### 합성 교차환율: 환전소 삼각 거래

여기서 현실적인 문제가 하나 있습니다. 실제로 AUD.ZAR를 교차환율로 제공하는 브로커는 거의 없습니다! 그래서 우리는 **삼각 거래** 방식을 사용해야 합니다.

어떻게 하냐면, USD나 EUR 같은 매우 유동적인 **기준 통화**를 매개로 사용합니다:

- AUD.ZAR를 X 호주 달러 상당만큼 효과적으로 매수하기 위해
- X 단위의 **B.ZAR를 매수**하고
- X 단위의 **B.AUD를 매도**합니다

여기서 B는 USD 같은 다른 기준 통화입니다. AUD.ZAR의 호가가 이 호가 비율과 정확히 같으므로, 이런 합성 쌍을 **USD.ZAR/USD.AUD**로 표시할 수 있습니다. 마치 직항 비행기가 없는 두 도시 사이를 여행할 때, 중간 허브 공항을 거치는 것과 비슷합니다!

### 손익 계산의 함정: 환전을 잊지 마세요!

이 합성 쌍을 라이브로 거래할 때, 실현된 **손익(P&L)**은 ZAR와 AUD 모두로 표시됩니다. 일반적으로, B.Q를 거래하는 전략의 수익률을 계산할 때, 우리는 이익이 **현지 통화**(미국 투자자의 경우 USD)로 표시된다고 가정하며, 이는 B나 Q 중 어느 것도 아닐 수 있습니다.

따라서 **실제 실현 손익이 백테스트 손익과 일치하려면**, B와 Q를 정기적으로 현지 통화로 환전해야 합니다. 예를 들어:

- 현지 통화가 USD이고
- 왕복 거래 후 X 단위의 AUD와 Y 단위의 ZAR의 실현 이익이 있다면
- **X 단위의 ZAR.USD**와 **Y 단위의 ZAR.AUD**를 매수해야 합니다

이것을 정기적으로 하지 않으면, AUD와 ZAR에 축적된 대규모 손익이 백테스트 결과와 **상당한 편차**를 야기할 수 있습니다. 마치 해외에서 번 돈을 환전하지 않고 계속 쌓아두면, 환율 변동에 따라 실제 가치가 크게 달라지는 것과 같습니다.

### 비동일 헤지 비율의 이점

AUD.CAD 같은 교차환율이 거래용으로 이미 만들어져 있을 때도, **AUD.USD** 대 **USD.CAD**를 **별도로** 거래하여 두 통화에 **다른 가중치**를 부여하는 것이 유리할 수 있습니다. 왜 그럴까요?

교차환율을 직접 거래하면 헤지 비율이 자동으로 1:1이 됩니다. 하지만 실제로는 두 통화의 최적 비율이 1:1이 아닐 수 있습니다! 마치 시소에서 양쪽 아이의 몸무게가 다르면, 균형점을 중앙에서 벗어나게 조정해야 하는 것처럼요.

예제 5.1의 코드가 바로 이런 전략을 보여줍니다. 이 전략에서 우리는 **요한센 검정(Johansen test)**을 사용하여 AUD.USD 대 CAD.USD 간의 최적 **헤지 비율(hedge ratio)** 또는 **자본 가중치(capital weights)**를 찾습니다.

### 포트폴리오 수익률 계산: 공식 해부

이제 수학적인 부분으로 들어가봅시다. 어렵게 느껴질 수 있지만, 한 단계씩 풀어보겠습니다.

**경우 1: 같은 호가 통화를 가진 쌍 (B1.USD와 B2.USD)**

예제 5.1에서는 궁극적으로 공통 호가 통화 USD를 가진 쌍으로 축소될 수 있는 두 통화를 거래합니다: $B_1$.USD - $B_2$.USD. $n_1$ 단위의 $B_1$.USD와 $n_2$ 단위의 $B_2$.USD를 가진 포트폴리오의 수익률은:

$$r(t+1) = \frac{n_1 y_{1,U}(t) r_1(t+1) + n_2 y_{2,U}(t) r_2(t+1)}{|n_1| y_{1,U}(t) + |n_2| y_{2,U}(t)} \qquad (5.1)$$

예제의 MATLAB 코드 마지막 줄에 표시된 대로입니다. 이 공식을 하나씩 뜯어봅시다:

- **분자**: 각 통화 포지션의 수익($n_i \times y_{i,U}(t) \times r_i(t+1)$)을 합한 것. 즉, "각 통화에서 얼마나 벌었는가?"
- **분모**: 총 투자 금액의 절대값($|n_1| y_{1,U}(t) + |n_2| y_{2,U}(t)$). 즉, "전체 얼마를 투자했는가?"
- $y_{i,U}(t)$: 시점 t에서 $B_i$.USD의 환율. 이것을 곱해야 하는 이유는 $B_i$.USD 1단위가 미국 달러로 $y_{i,U}$ 가치이기 때문입니다.

여기서 $r_i$는 $B_i$.USD의 수익률입니다:

$$r_i(t+1) = \frac{y_{i,U}(t+1) - y_{i,U}(t)}{y_{i,U}(t)} \qquad (5.2)$$

여기서 $y_{i,U}(t)$와 $y_{i,U}(t+1)$은 각각 t와 t+1에서의 $B_i$.USD 호가입니다. 간단히 말해 "(오늘 환율 - 어제 환율) / 어제 환율"입니다. 주식의 수익률 계산과 똑같죠!

**경우 2: 같은 기준 통화를 가진 쌍 (USD.Q1과 USD.Q2)**

만약 포트폴리오가 대신 $n'_1$ 단위의 USD.$Q_1$과 $n'_2$ 단위의 USD.$Q_2$를 가지고 있다면, 수익률은 더 **간단해집니다**:

$$r(t+1) = \frac{n_1' r_1(t+1) + n_2' r_2(t+1)}{|n_1'| + |n_2'|} \qquad (5.3)$$

왜 더 간단할까요? 여기서:

$$r_i(t+1) = \frac{y_{Ui}(t+1) - y_{Ui}(t)}{y_{Ui}(t)} \qquad (5.4)$$

이고 $y_{U,i}(t)$와 $y_{U,i}(t+1)$은 각각 t와 t+1에서의 USD.$Q_i$ 호가입니다. **USD.$Q_i$ 1단위는 정확히 1 미국 달러 가치**이기 때문입니다! 기준 통화가 USD이므로, 1단위가 항상 1달러입니다. 따라서 분모에서 환율을 곱할 필요가 없어지는 거죠.

> **중요한 주의사항**: 식 5.2와 5.4는 **롤오버 이자(rollover interests)**를 무시했기 때문에 엄밀히 말해 정확하지 않습니다. 롤오버 이자는 다음 섹션에서 논의할 것입니다. 그러나 롤오버 이자의 영향은 예제 5.1에서 설명하는 것과 같은 단기 전략에서는 일반적으로 크지 않으므로, 여기서는 단순함을 위해 생략했습니다.

---

### 예제 5.1: 요한센 고유벡터를 사용한 USD.AUD 대 USD.CAD 페어 트레이딩

이 전략은 예제 3.1(*PriceSpread.m*)의 전략과 유사한 고전적인 **선형 평균회귀 전략(linear mean-reverting strategy)**입니다. 하지만 몇 가지 중요한 차이점이 있습니다:

| 항목 | 예제 3.1 | 예제 5.1 |
|------|---------|---------|
| 헤지 비율 계산 | 20일 룩백 | **250일 고정 훈련 세트** (후향적으로 더 나은 결과를 제공) |
| 이동평균/표준편차 | 20일 룩백 | 20일 룩백 (동일) |
| 핵심 차이 | — | **헤지 비율이 1이 아님** (하나의 교차환율 AUD.CAD로 거래 불가) |

또한 현재 전략은 예제 2.5의 일반적인 외환 전략과도 매우 다릅니다.

**왜 USD.CAD 대신 CAD.USD를 사용할까요?** 이것이 매우 중요한 포인트입니다.

USD.AUD 대 USD.CAD에 대해 요한센 검정을 실행하는 대신, 실제로 **AUD.USD와 CAD.USD**에 대해 실행해야 합니다. 왜냐하면 **요한센 검정(Johansen test)**의 **고유벡터(eigenvector)**를 자본 가중치로 해석하려면, 두 가격 시계열이 **동일한 호가 통화**를 가져야 하기 때문입니다. 그렇지 않으면, 두 추정 공적분 상품의 포인트 움직임이 같은 가치를 갖지 않아 요한센 검정이 무의미해집니다.

마치 사과와 오렌지의 가격을 비교하려면 둘 다 "원/개"라는 같은 단위로 환산해야 하는 것과 같습니다. "원/킬로그램"과 "원/개"를 섞으면 비교가 무의미해지겠죠?

직관적으로도 말이 됩니다: 평균회귀 전략에서 CAD.USD가 AUD.USD보다 훨씬 낮으면, "캐나다 달러가 상대적으로 싸구나, 사야겠다!"라고 생각하는 거죠.

**실전 팁**: 백테스트 프로그램에서 CAD.USD를 사용하는 것이 라이브 거래를 더 어렵게 만들지 않습니다. 프로그램이 "1 단위의 CAD.USD 매수" 주문을 보낼 때마다, 우리는 단순히 **"1/y USD.CAD 매도"**하면 됩니다. 여기서 y는 USD.CAD의 현재 호가입니다.

#### 예제 5.1의 MATLAB 코드

우리는 입력이 두 개의 *T* x 1 배열 *usdcad*와 *usdaud*(둘 다 일별 가격 시계열)라고 가정합니다. *T* x 1 배열 *yport*는 USD로 표시된 AUD.USD와 CAD.USD의 단위 포트폴리오의 시장 가치이고, *numUnits*는 우리 전략이 보유하라고 하는 이 단위 포트폴리오의 단위 수입니다. *T* x 2 배열 *positions*는 우리가 보유해야 하는 AUD.USD와 CAD.USD의 USD 시장 가치를 나타냅니다. 당연히, 손익(다시 USD로)은 각 상품의 시장 가치에 그들의 수익률을 곱한 합이고, 포트폴리오의 일별 수익률은 손익을 전날 말 포트폴리오의 총 시장 가치 합계로 나눈 것입니다.

코드는 *AUDCAD_unequal.m*으로 다운로드할 수 있습니다.

```
cad=1./usdcad.cl;
aud=audusd.cl;
y=[ aud cad ];
trainlen=250;
lookback=20;
hedgeRatio=NaN(size(y));
numUnits=NaN(size(y, 1), 1);
for t=trainlen+1:size(y, 1)
  res=johansen(log(y(t-trainlen:t-1, :)), 0, 1);
  hedgeRatio(t, :)=res.evec(:, 1)';
  yport=sum(y(t-lookback+1:t, :).* ...
   repmat(hedgeRatio(t, :), [lookback 1]), 2);
  ma=mean(yport);
  mstd=std(yport);
  zScore=(yport(end)-ma)/mstd;
  numUnits(t)=-(yport(end)-ma)/mstd;
end
positions=repmat(numUnits, [1 size(y, 2)]).*hedgeRatio.*y;
pnl=sum(lag(positions, 1).*(y-lag(y, 1))./lag(y, 1), 2);
ret=pnl./sum(abs(lag(positions, 1)), 2);
```

코드를 한 줄씩 해석해봅시다:

- `cad=1./usdcad.cl`: USD.CAD의 역수를 취해서 CAD.USD로 변환합니다
- `y=[ aud cad ]`: AUD.USD와 CAD.USD를 나란히 놓습니다
- `johansen(log(y(...)), 0, 1)`: 로그 가격에 대해 요한센 검정을 실행합니다
- `hedgeRatio(t,:)=res.evec(:,1)'`: 첫 번째 고유벡터를 헤지 비율로 사용합니다
- `numUnits(t)=-(yport(end)-ma)/mstd`: Z-스코어의 음수를 포지션 크기로 사용합니다. Z-스코어가 양수면(평균 위) 숏하고, 음수면(평균 아래) 롱합니다
- 마지막 줄: 포트폴리오 수익률은 손익을 총 시장 가치의 절대값으로 나눈 것입니다

#### 예제 5.1의 성과

전략 성과를 계산할 때 처음 250일의 롤링 훈련 데이터를 제외하면, **2009년 12월 18일부터 2012년 4월 26일까지**의 기간에:

- **APR(연환산 수익률)**: 11%
- **샤프 비율(Sharpe ratio)**: 1.6

이것은 상당히 인상적인 결과입니다! 샤프 비율 1.6은 위험 대비 수익이 매우 좋다는 뜻이죠. 누적 수익률 곡선은 그림 5.1에 표시되어 있습니다.

![](_page_5_Figure_3.jpeg)

**그림 5.1** USD.AUD 대 USD.CAD 전략의 누적 수익률

### 완전히 다른 교차환율 쌍의 거래

때때로 완전히 다른 두 교차환율 쌍을 서로 거래하는 데서 수익성 있는 기회를 찾을 수 있습니다: $B_1.Q_1$ 대 $B_2.Q_2$. 이 경우 기준 통화도 다르고 호가 통화도 다릅니다.

전략이 $n_1$ 단위의 $B_1.Q_1$과 $n_2$ 단위의 $B_2.Q_2$의 포트폴리오를 요구한다면, 포트폴리오의 일별 수익률(USD의 가정된 현지 통화로)은 **같은 식 5.1**로 주어집니다. 거기서 $r_i$는 $B_i.Q_i$의 수익률이 되므로, 식 5.2는 다음으로 대체됩니다:

$$r_i(t+1) = \{ \log (y_{i,Q_i}(t+1)) - \log (y_{i,Q_i}(t)) \} \qquad (5.5)$$

여기서 $y_{i,Qi}(t)$는 $B_i.Q_i$의 호가입니다. 왜 여기서는 로그 수익률을 사용할까요? 기준 통화와 호가 통화가 모두 다를 때는 로그 수익률이 더 적절한 근사를 제공하기 때문입니다. 수익률 계산을 위한 현지 통화로 USD 대신 EUR이나 다른 통화를 사용했다면 같은 식 5.1부터 5.5가 유효합니다.

> **핵심 메시지**: 보시다시피, 통화 차익거래 전략을 백테스트하는 데 있어 **핵심 어려움은 전략의 복잡성이 아닙니다!** 진짜 어려운 것은 공적분 테스트를 위한 **데이터 시계열을 준비하는 올바른 방법**과 **수익률을 측정하는 올바른 공식**입니다. 마치 요리의 핵심이 화려한 기술이 아니라 좋은 재료의 손질에 있는 것처럼요!

---

## 통화 거래의 롤오버 이자: 밤사이에 발생하는 숨겨진 비용(또는 수익)

### 왜 이것이 중요한가?

통화 교차환율 거래의 독특한 특징 중 하나는 교차환율 포지션을 **야간에 보유**할 경우 얻거나 지불하는 **차등 이자율(differential interest rate)**입니다. 이것을 **롤오버 이자(rollover interest)**라고 합니다.

비유하자면, 통화를 빌려서 다른 통화를 사는 것이므로, 빌린 통화에는 이자를 지불하고, 산 통화에서는 이자를 받는 것과 같습니다. 마치 은행에서 대출받아 예금하는 것처럼, **두 금리의 차이**가 여러분의 비용 또는 수입이 됩니다.

### 롤오버 이자의 기본 메커니즘

통화 거래에서 "야간"은 **오후 5시(ET)** 까지 또는 그 이후에 포지션을 보유하는 것을 의미합니다.

**B.Q 쌍을 야간에 롱**으로 보유하면:
- 이자 차이 = $i_B - i_Q$
- 여기서 $i_B$와 $i_Q$는 각각 통화 B와 Q의 일별 이자율

만약 $i_Q > i_B$이면, 롤오버 이자라고도 하는 이 이자 차이는 실제로 **차변 이자(debit interest)**가 됩니다 — 즉, 계정에서 **차감**됩니다! 반대로 $i_B > i_Q$이면 여러분이 이자를 **받게** 됩니다.

### T+2일 결제 시스템의 복잡성

여기서 좀 복잡해지는 부분이 있습니다. 실제로 **T+2일 결제 시스템(T + 2 day settlement system)**과 관련된 이유로:

- 포지션이 T일 오후 5시(ET) 마감 이후에 보유되었고
- T+3일이 교차환율의 어느 통화에 대해서든 **주말이나 휴일**이면
- 해당 포지션에 발생한 롤오버 이자는 **시장이 닫혀 있는 일수에 1을 더한 값**을 곱합니다

**실전 예시**: 수요일 오후 5시(ET) 이후에 포지션을 보유하면?
- T일 = 수요일, T+2일 = 금요일, T+3일 = 토요일(주말!)
- 토요일, 일요일은 시장이 닫혀 있으므로
- 롤오버 이자는 일별 이율의 **3배**가 됩니다

**특수 예외**: USD.CAD나 USD.MXN을 거래할 때는 결제가 **T+1일**에 발생합니다. 따라서:
- T+2일이 주말이나 휴일인 경우에만 롤오버 이자에 비거래일 수에 1을 더한 값을 곱합니다
- **목요일** 오후 5시(ET) 이후에 포지션이 보유된 경우에만 롤오버 이자가 일별 이율의 3배가 됩니다

이러한 모든 고려사항은 야간 포지션을 보유하는 전략의 **백테스트 정확도**에 영향을 미칩니다!

### 초과 수익률과 금융 비용

어떤 전략에 대해서든 **샤프 비율**을 계산할 때, 우리는 **초과 수익률(excess return)**을 계산해야 합니다. 샤프 비율은 평균 초과 수익률을 초과 수익률의 표준편차로 나눈 비율이며, 적절히 연율화됩니다. 초과 수익률은 전략이 보유한 포지션의 수익률에서 해당 포지션의 **금융 비용(financing cost)**을 뺀 것입니다.

다양한 자산별 금융 비용을 정리하면:

| 자산 유형 | 금융 비용 | 이유 |
|----------|----------|-----|
| 일중 포지션만 | 0 | 야간 보유 없음 |
| **롱숏 달러 중립(long-short dollar neutral)** 주식 | ~0 | 신용 이자가 보통 차변 이자의 절대값보다 약간 작지만 거의 상쇄 |
| 선물 | 0 | 선물 포지션은 단지 계약이지 자금을 조달할 현금이 필요한 자산이 아님 (증거금 현금은 계정에서 이자를 발생시킴) |
| 통화 교차환율 | 롤오버 이자를 포함하면 0 | 아래 설명 참조 |

통화 교차환율의 경우, 교차환율의 퍼센트 변화에 롤오버 이자를 **추가**하는 한, 금융 비용을 다시 0으로 설정할 수 있습니다. 즉, 식 5.5를 수정하여 t일부터 t+1일까지 교차환율 포지션 *POSB.Q*를 보유함으로써 얻는 초과 수익률 $r_{t+1}$이 다음과 같도록 해야 합니다:

$$r(t+1) = \{ \log (y_{B,Q}(t+1)) - \log (y_{B,Q}(t)) + \log (1 + i_B(t)) - \log (1 + i_Q(t)) \} \qquad (5.6)$$

여기서 $y(t)$와 $y(t+1)$은 각각 t와 t+1에서의 B.Q 호가입니다 (Dueker, 2006).

이 공식의 의미를 풀어보면:
- **첫 번째 부분** ($\log(y_{B,Q}(t+1)) - \log(y_{B,Q}(t))$): 환율 자체의 변화에서 오는 수익
- **두 번째 부분** ($\log(1 + i_B(t)) - \log(1 + i_Q(t))$): 두 통화의 이자율 차이에서 오는 수익

마치 "집값 상승분 + 임대료 수입 - 대출 이자"처럼, 통화 거래의 총 수익은 환율 변동 + 이자 차이입니다.

예제 5.2에서, AUD.CAD에 대한 선형 평균회귀 전략을 백테스트할 때 롤오버 이자를 어떻게 고려할 수 있는지 봅니다.

---

### 예제 5.2: 롤오버 이자를 포함한 AUD.CAD 페어 트레이딩

이 예제에서도 선형 평균회귀 전략을 계속 사용하지만, 예제 5.1과 대조적으로 그리고 단순함을 위해, USD.CAD 대 AUD.USD를 별도로 거래하는 것이 아니라 이미 만들어진 쌍 **AUD.CAD를 직접 거래**합니다. 이 전략은 오후 5시(ET) 이후에도 보유하므로 야간 **롤오버 이자율**을 고려할 것입니다.

**데이터 준비**:
- AUD.CAD의 일별 종가: *T* x 1 배열 *dailyCl*, 해당 거래일은 *T* x 1 배열 *tday*
- 역사적 이자율 출처:
  - 호주: 호주 중앙은행 웹사이트의 단기금융시장 금리 (www.rba.gov.au/statistics/tables/#interest_rates)
  - 캐나다: 캐나다 은행 웹사이트의 야간 단기금융시장 자금조달 금리 (www.bankofcanada.ca/wp-content/uploads/2010/09/selected_historical_page33.pdf)
- 일별 AUD 및 CAD 이자율은 *tday*의 날짜와 일치하는 두 개의 *T* x 1 배열 *aud_dailyRates*와 *cad_dailyRates*

소스 코드는 *AUDCAD_daily.m*으로 다운로드할 수 있습니다. lookback=20;

```
% AUD에 대해 수요일에 3배 롤오버 이자
isWednesday=weekday(datenum(num2str(tday), 'yyyymmdd'))==4;
aud_dailyRates(isWednesday)=3*aud_dailyRates(isWednesday);
cad_dailyRates=zeros(size(tday));
% CAD에 대해 목요일에 3배 롤오버 이자
```

#### 예제 5.2 (계속)

```
isThursday=weekday(datenum(num2str(tday), 'yyyymmdd'))==5;
cad_dailyRates(isThursday)=3*cad_dailyRates(isThursday);
ma=movingAvg(dailyCl, lookback);
z=(dailyCl-ma);
ret=lag(-sign(z), 1).*(log(dailyCl)- ...
 lag(log(dailyCl)+log(1+aud_dailyRates)- ...
 log(1+cad_dailyRates), 1));
```

코드의 핵심을 해석하면:

1. **수요일에 AUD 이자율 3배**: AUD는 일반 T+2 결제이므로 수요일에 3일분(수, 토, 일)의 이자 발생
2. **목요일에 CAD 이자율 3배**: CAD는 T+1 결제이므로 목요일에 3일분(목, 토, 일)의 이자 발생
3. **수익률 계산**: 식 5.6을 그대로 코드로 구현 — 환율의 로그 변화 + 이자율 차이
4. **`-sign(z)`**: z-스코어의 부호 반대로 포지션을 잡음. 가격이 이동평균 위면 숏, 아래면 롱

#### 예제 5.2의 성과와 교훈

이 간단한 평균회귀 전략의 결과:

| 지표 | 롤오버 이자 포함 | 롤오버 이자 미포함 |
|------|----------------|-----------------|
| APR | 6.2% | 6.7% |
| 샤프 비율 | 0.54 | 0.58 |

이는 비단위 헤지 비율을 사용한 예제 5.1의 결과(APR 11%, 샤프 1.6)보다 **훨씬 약한 결과**입니다. 이유가 뭘까요? 최적의 헤지 비율을 사용하지 않고 단순 1:1 비율로 거래했기 때문입니다.

흥미로운 점은, **연율화된 평균 롤오버 이자가 거의 5%에 달함에도** 불구하고, 롤오버 이자를 고려하지 않았더라도 APR은 6.7%로, 샤프 비율은 0.58로 **약간만 증가**했을 것이라는 점입니다. 이 전략이 포지션을 자주 바꾸어 롱과 숏의 이자 효과가 어느 정도 상쇄되기 때문일 수 있습니다.

---

## 선물 캘린더 스프레드 거래: 같은 상품, 다른 만기의 시소

### 왜 캘린더 스프레드인가?

**만기일(또는 "만기")이 다른 선물 계약은 가격이 다르고, 수익률도 약간 다릅니다.** 만기가 다른 선물 계약을 짝지으면 **캘린더 스프레드(calendar spreads)**라고 알려진 것이 만들어집니다.

비유하자면, 같은 쌀이라도 "이번 달 배달"과 "6개월 후 배달"의 가격이 다른 것과 같습니다. 보관료, 금리, 수요 예측 등이 가격에 반영되기 때문이죠.

캘린더 스프레드의 두 레그(다리)가 모두 기초자산의 가격을 추적하므로, 잠재적으로 평균회귀 거래에 좋은 기회를 제공할 것이라고 생각할 수 있습니다. 그러나 **실제로는 일반적으로 평균회귀하지 않습니다!** 그 이유를 이해하려면 일반적으로 선물의 수익률을 주도하는 것이 무엇인지 더 이해해야 합니다.

---

### 롤 수익률, 백워데이션, 콘탱고: 선물 가격의 숨은 엔진

#### 롤 수익률이란?

만기가 다른 선물 계약의 가격이 다르다는 사실은, 기초 현물 가격이 변하지 않더라도 선물 포지션이 **0이 아닌 수익률**을 가질 것임을 의미합니다. 결국 모든 가격은 그 일정한 현물 가격을 향해 수렴해야 하기 때문입니다.

이 수익률을 **롤 수익률(roll return)** 또는 **롤 수익(roll yield)**이라고 합니다.

비유를 들어볼까요? 여러분이 **"미래 배달 약속"**을 샀다고 생각해보세요. 오늘 쌀 한 가마니의 시장 가격(현물 가격)이 50,000원인데, 6개월 후 배달 약속(선물)은 48,000원에 샀습니다. 6개월이 지나서 쌀 가격이 여전히 50,000원이라면, 여러분은 48,000원에 산 것을 50,000원에 받는 셈이니 2,000원의 이득을 봅니다. 이것이 바로 **롤 수익률**입니다!

> **중요**: 이름에도 불구하고, 선물 포지션은 실제로 다음 계약으로 "롤 포워드(갈아타기)"하든 안 하든 이 수익률을 겪습니다. 이것은 총 수익률의 본질적인 부분이며, 현물 수익률과 롤 수익률로 분해될 수 있습니다.

#### 백워데이션과 콘탱고

이 두 용어는 선물 시장의 가격 구조를 설명하는 핵심 개념입니다:

- **백워데이션(backwardation)**: **근월물(near, 만기가 가까운)** 계약이 **원월물(far, 만기가 먼)** 계약보다 **높은 가격**을 가지는 상태. 롤 수익률이 **양수**입니다.
- **콘탱고(contango)**: 그 반대. 원월물이 근월물보다 비싼 상태. 롤 수익률이 **음수**입니다.

그래프로 이해해봅시다. 현물 가격이 시간 내내 변하지 않고 수평선으로 표시된다고 상상해보세요.

![](_page_9_Figure_2.jpeg)

**그림 5.2** 백워데이션 상태에서 시간의 함수로서 만기가 다른 선물의 로그 가격

또한 만기가 다른 로그 선물 가격이 같은 기울기를 가진 시간의 동일한 선형 함수에 부합하지만 만기에서 현물 가격과 교차하는 다른 절편을 가진다고 가정할 수 있습니다.

**백워데이션의 경우** (그림 5.2): 근월 선물이 원월 선물보다 높은 가격을 가지고 수평선과 더 일찍 교차해야 하므로, 위쪽으로 기울어지고 양의 롤 수익률을 가져야 합니다. 어느 시점에서든 첫 번째 근월물 계약의 가격 $P_1$은 두 번째 근월물 계약의 가격 $P_2$보다 높고, 이런 식으로 계속됩니다.

![](_page_10_Figure_2.jpeg)

**그림 5.3** 콘탱고 상태에서 시간의 함수로서 만기가 다른 선물의 로그 가격

**콘탱고의 경우** (그림 5.3): 그 반대가 참입니다. (일정한 복리 총 수익률을 가진 계약이 직선으로 나타나도록 원시 가격 대신 로그 가격을 표시합니다.)

> **참고**: 이 그래프 논증은 단지 **기억술**로 사용될 뿐 증명이 아닙니다. 물론 실제 로그 선물 가격은 시간의 선형 함수가 아니고, 만기 전에 교차할 수도 있으며(다른 만기의 두 계약이 같은 가격), 마지막으로 만기 시 현물 가격이 시간 내내 일정할 가능성은 낮습니다. 그럼에도 불구하고, 그림 5.2와 5.3은 전형적인 상황을 보여줍니다.

백워데이션이 근월물 계약이 원월물 계약보다 높은 가격을 의미하는지 기억하는 데 도움이 되는 기억술은 박스 5.1에 제시되어 있습니다.

---

#### 박스 5.1: 백워데이션 대 콘탱고 기억술

"백워데이션이 근월물이 더 비싼 건가, 싼 건가?" 혼란스러우시죠? 저자도 기억할 수 없다고 합니다! 여러분도 같다면, 아래의 기억술을 사용할 수 있습니다.

이 기억법은 경제학의 거장 **존 메이너드 케인스(John Maynard Keynes)**에서 유래합니다 (Hull, 1997). 케인스와 존 힉스는 다음과 같이 주장했습니다:

1. 일반 상품의 경우, 실제로 물리적 상품을 소유하는 사람들(**"헤저"**, 예: 농부나 석유 생산자)이 그들의 포지션을 **선물 매도**로 헤지하는 경향이 있으며, 그들의 헤지에서 손실을 볼 것으로 예상합니다
2. 한편, **투기자들**은 순 롱 포지션을 가지고 있으며, 이 위험을 감수하는 데 대한 **보상**을 받아야 합니다
3. 따라서 투기자들은 **양의 롤 수익률**을 가진 선물, 또는 동등하게 **예상 미래 현물 가격보다 낮은 가격을 가진 선물**, 즉 **"정상 백워데이션(normal backwardation)"** 상태의 선물만 살 것입니다

기억법: **"백워데이션" = "정상" = 선물 가격이 항상 현물 가격보다 낮음**

물론, 이 주장은 완전히 정확하지 않습니다. 우리는 완벽하게 "정상적인" 상품인 원유가 다양한 기간에 걸쳐 콘탱고 상태에 있다는 것을 볼 것이기 때문입니다. 하지만 이 이야기는 우리에게 좋은 기억술을 제공합니다!

---

### 선물 가격의 수학적 모델: 직선 위의 비밀

#### 기본 모델

일련의 선물 계약에 대한 현물 및 롤 수익률을 계산하기 위해서는 **선물 가격(futures prices)**의 간단한 모델을 갖는 것이 도움이 됩니다. 많은 상품에 대해, 우리는 다음과 같이 쓸 수 있습니다:

$$F(t, T) = S(t)\exp(\gamma(t - T)) \qquad (5.7)$$

각 변수의 의미:
- $F(t, T)$: 시간 t에서 만기 T인 선물의 가격
- $S(t)$: 시간 t에서의 현물 가격
- $\gamma$: (복리) 롤 수익률 — 시간에 따라 **일정**하다고 가정 (Hull, 1997)
- $t - T$: 현재 시간에서 만기까지의 시간 차이 (보통 음수, 만기가 미래이므로)

이 모델이 무엇을 말하는지 직관적으로 생각해봅시다:
- $\gamma > 0$ (백워데이션): $t < T$이므로 $\gamma(t-T) < 0$, 따라서 $\exp(\gamma(t-T)) < 1$, 즉 **선물 가격 < 현물 가격**
- $\gamma < 0$ (콘탱고): $\exp(\gamma(t-T)) > 1$, 즉 **선물 가격 > 현물 가격**

#### 현물 수익률까지 포함한 확장 모델

그러나 우리는 한 단계 더 나아가, (복리) 현물 수익률 $\alpha$도 일정하다고 가정할 수 있습니다:

$$S(t) = c e^{\alpha t} \qquad (5.8)$$

여기서 $c$는 상수입니다. 본질적으로, 우리는 그림 5.2와 5.3의 그 선들을 수학적으로 설명하고자 하며, 그것들이 수평선이 아니라 0이 아닌 기울기를 가진 선에서 끝나도록 약간 수정합니다.

두 식을 결합하면 시간 T에 만기되는 선물의 가격에 대해 우리가 채택하는 모델은:

$$F(t, T) = c e^{\alpha t} \exp(\gamma(t - T)) \qquad (5.9)$$

여기서 $c$, $\alpha$, $\gamma$는 상수입니다.

#### 총 수익률과 롤 수익률의 분리

계약의 총 수익률은 다음과 같이 주어집니다:

$$\frac{\partial(\log F(t, T))}{\partial t} = \alpha + \gamma \qquad (5.10)$$

특정 계약에 대해 만기 $T$가 **고정**되어 있기 때문입니다. 결과는 깔끔하게 **현물 수익률($\alpha$) + 롤 수익률($\gamma$)**이 됩니다!

마지막으로, **선물의 롤 수익률**은 다음과 같이 주어집니다:

$$-\frac{\partial(\log F(t, T))}{\partial T} = \gamma \qquad (5.11)$$

이것은 만기 $T$에 대한 미분입니다. 같은 시점에서 만기만 다른 두 계약의 가격 차이가 롤 수익률을 반영한다는 뜻이죠.

따라서, 우리는 **총 수익률 = 현물 수익률 + 롤 수익률**이라는 개념을 수학적으로 포착했습니다.

이 모델을 기반으로, 예제 5.3에서 보여주듯이 선형 회귀를 사용하여 선물 시계열의 현물 및 롤 수익률을 추정할 수 있습니다.

### 롤 수익률의 함정: Chan 교수의 뼈아픈 경험

롤 수익률은 기초 현물 가격에 의해 알려지거나 직관적으로 이해된 지식에 기반한 많은 겉보기에 매력적인 전략에 **저주**가 될 수 있습니다.

예를 들어, 상품 생산자의 ETF(예: **XLE**)는 일반적으로 해당 상품의 **현물 가격**과 공적분합니다. 그러나 롤 수익률의 존재 때문에, 이 ETF는 해당 상품의 **선물 가격**과 공적분하지 않을 수 있습니다!

> **저자의 실제 경험**: "이 미묘함을 이해하지 못해 저는 **10만 달러 이상의 거래 손실**을 입었고, 독립 트레이더로서의 **첫 해(2006년)를 망쳤습니다.**"

이것은 단순한 이론이 아니라, 실제 돈이 걸린 교훈입니다! 현물과 선물의 관계를 이해하지 않고 거래하면 큰 대가를 치를 수 있습니다.

---

### 예제 5.3: 일정 수익률 모델을 사용한 현물 및 롤 수익률 추정

#### 기본 아이디어

식 5.9에서 했듯이 현물 및 롤 수익률이 시간에 걸쳐 진정으로 일정하다고 가정하면, **선형 회귀(linear regression)**를 사용하여 그 값을 추정할 수 있습니다.

- **현물 수익률 찾기**: 현물 가격의 로그를 시간에 대해 회귀하면 됩니다
- **롤 수익률 찾기**: 고정된 시점을 선택하고, 다양한 계약의 가격을 **만기까지의 시간**에 대해 회귀해야 합니다

실제로, 회귀 계수는 그 고정된 시간과 해당 시간에 사용 가능한 정확한 계약 세트에 따라 달라집니다. 따라서 일정한 롤 수익률을 가정함에도 불구하고, 우리는 여전히 **천천히 변하는** 추정된 $\gamma$를 얻게 됩니다.

#### 분석 대상 선물

우리는 이 절차를 서로 다른 범주의 몇 가지 다른 선물에 적용할 것입니다:

| 심볼 | 이름 | 범주 |
|------|-----|------|
| **BR** (CME) | 브라질 헤알 선물 | 통화 |
| **C** (CBOT) | 옥수수 선물 | 농산물 |
| **CL** (NYMEX) | WTI 원유 선물 | 에너지 |
| **HG** (CME) | 구리 선물 | 금속 |
| **TU** (CBOT) | 2년 미국 재무부 채권 선물 | 금리 |

#### 현물 수익률 추정 코드

다음 프로그램에서, 현물 가격은 $\tau$ x 1 배열 *spot*에 포함되어 있고, 선물 종가 데이터는 $\tau$ x $M$ 배열 *cl*에 저장되어 있다고 가정합니다. 여기서 $\tau$는 거래일 수이고, $M$은 계약 수입니다. 확실히 모든 계약이 항상 존재하는 것은 아니므로, 일부 계약이 존재하지 않는 날의 가격은 NaN으로 표시합니다.

먼저 아래의 간단한 회귀로 평균 연율화 (복리) 현물 수익률을 찾을 것입니다. (프로그램은 *estimateFuturesReturns.m*으로 다운로드할 수 있습니다.)

```
T=[1:length(spot)]';
T(isBadData)=[];
res=ols(log(spot), [T ones(size(T, 1), 1)]);
fprintf(1, 'Average annualized spot return=%f\n', ...
 252*smartmean(res.beta(1)));
```

이 코드는 단순합니다:
1. 시간 인덱스 T를 만들고
2. 불량 데이터를 제거한 뒤
3. $\log(\text{현물 가격})$을 $[T, 1]$에 대해 OLS 회귀
4. 기울기($\beta_1$)에 252를 곱해 연율화 (1년 약 252 거래일)

#### 롤 수익률 추정 코드

다음으로, 롤 수익률 $\gamma$ 값을 얻기 위해 **선도 곡선(forward curve)** — 선물 가격을 만기일의 함수로 — 을 피팅할 것입니다. 즉, 한 번에 하루를 선택하고 피팅을 위해 5개의 연속 계약이 있는 한 가장 가까운 5개 만기의 선물 가격을 만기까지의 시간 $T$(월 단위)에 피팅합니다.

왜 5개만 사용할까요? 선도 곡선은 가장 가까운 5개 계약을 넘어서면 콘탱고에서 백워데이션으로 또는 그 반대로 변할 수 있기 때문입니다. 직선 피팅이 더 이상 유효하지 않게 되는 거죠. $\gamma$ 값을 $\tau$ x 1 배열 *gamma*에 저장합니다.

```
Gamma=NaN(size(tday));
for t=1:length(tday)
  FT=cl(t, :)';
  idx=find(isfinite(FT));
  idxDiff=fwdshift(1, idx)-idx; % 연속 월물 선물 확인
  if (length(idx) >= 5 && all(idxDiff(1:4)==1))
    FT=FT(idx(1:5));
    T=[1:length(FT)]';
    res=ols(log(FT), [T ones(size(T, 1), 1)]);
    gamma(t)=-12*res.beta(1);
  end
end
```

코드 해석:
1. 각 날짜에 대해 사용 가능한 선물 가격을 찾음
2. 연속 5개 계약이 존재하는지 확인 (`idxDiff(1:4)==1`)
3. 로그 가격을 만기 순서에 대해 회귀
4. 기울기에 **-12**를 곱함: 마이너스는 식 5.7의 $(t-T)$ 부호 때문이고, 12는 월 단위를 연 단위로 변환

#### 모델 검증

식 5.7이 합리적인지 확인하기 위해, 그림 5.4에서 고정된 한 시점에서 CL의 로그 선물 값을 만기까지의 시간에 대해 산점도로 그리고 실제로 직선 위에 꽤 깔끔하게 떨어지는지 확인합니다. (이 산점도에서는 가장 가까운 5개 계약만으로 제한합니다. 만기가 더 먼 계약의 가격은 같은 직선 위에 그렇게 깔끔하게 떨어지지 않을 수 있으며, 이는 식 5.7의 붕괴를 나타냅니다.)

![](_page_13_Figure_6.jpeg)

**그림 5.4** CL 2007년 1월~5월 계약의 만기까지 시간 대비 로그 선물 값 산점도. 로그 가격이 직선 위에 깔끔하게 떨어진다.

#### CL의 롤 수익률 시계열

2004년 11월 22일부터 2012년 8월 13일까지의 기간에 대한 CL의 연율화된 $\gamma$ 값은 그림 5.5에 표시되어 있습니다.

![](_page_14_Figure_4.jpeg)

**그림 5.5** CL의 롤 수익률 $\gamma$ 값. 양수 값은 백워데이션을, 음수 값은 콘탱고를 나타낸다.

그래프에서 볼 수 있듯이, CL은 백워데이션과 콘탱고 사이를 왔다갔다 합니다. 2008년 금융 위기 전후로 특히 큰 변동을 보이고 있죠.

#### 5가지 선물의 현물 및 롤 수익률 비교

표 5.1에 5가지 선물에 대한 현물 수익률 $\alpha$와 롤 수익률 $\gamma$의 평균 연율화 값을 나열했습니다.

| 표 5.1  | 다양한 선물의 연율화 평균 현물 및 롤 수익률 |        |
|------------|----------------------------------------------|--------|
| 심볼     | $\alpha$                                            | $\gamma$      |
| BR (CME)   | -2.7%                                        | 10.8%  |
| C (CBOT)   | 2.8%                                         | -12.8% |
| CL (NYMEX) | 7.3%                                         | -7.1%  |
| HG (CME)   | 5.0%                                         | 7.7%   |
| TU (CBOT)  | -0.0%                                        | 3.2%   |

**놀라운 발견**: BR, C, TU의 경우 **롤 수익률의 크기가 현물 수익률보다 훨씬 큽니다!**

- **BR**(브라질 헤알): 현물 -2.7% vs 롤 +10.8%. 선물의 총 수익률은 롤 수익률이 지배!
- **C**(옥수수): 현물 +2.8% vs 롤 -12.8%. 옥수수 현물이 올라가도 선물은 크게 손해 볼 수 있음!
- **TU**(국채): 현물 0% vs 롤 +3.2%. 순전히 롤 수익률로만 수익

이 표가 알려주는 교훈: **현물 가격만 보고 선물 거래 전략을 세우면 큰 착각에 빠질 수 있습니다!**

---

### VIX 선물의 함정: 현물은 평균회귀하지만 선물은?

여기서 또 다른 중요한 예를 살펴봅시다. 금융을 공부하는 모든 학생은 **변동성이 평균회귀한다**는 것을 압니다. 더 정확히 말하면, 우리는 **VIX 지수(VIX index)**가 평균회귀한다는 것을 압니다. 실제로 **확장된 딕키-풀러(ADF) 검정(augmented Dickey-Fuller test)**은 **99%의 확실성**으로 정상(stationary)임을 보여줄 것입니다.

"그렇다면 VX 선물 거래가 훌륭한 평균회귀 전략이 될 거야!"라고 생각할 수 있습니다. (**VX**는 CBOE 선물 거래소[CFE]에서 거래되는 VIX 변동성 지수를 추적하는 선물입니다.)

하지만 **함정**이 있습니다!

시간에 따른 **수정된 근월물(back-adjusted front-month)** 선물 가격을 보면, VX의 평균회귀는 변동성이 다음 시점에서 정점을 찍은 후에**만** 발생합니다:
- 2008년 11월 20일경 (신용 위기)
- 2010년 5월 20일 (플래시 크래시 여파)
- 2011년 10월 3일

다른 시간에는 그냥 **끊임없이 하락**합니다! 실제로 ADF 검정은 수정된 근월물 계약 가격이 **확실히 평균회귀하지 않음**을 보여줍니다.

![](_page_15_Figure_4.jpeg)

**그림 5.6** VIX 지수 대 수정된 VX 근월물 계약 가격

VIX와 근월물 VX의 차이를 그림 5.6에서 볼 수 있으며, **이 차이는 전적으로 롤 수익률 때문**입니다. VX 선물은 약 **3/4의 시간 동안 콘탱고** 상태에 있었고, 평균 롤 수익률은 매우 부정적인 **연율화 -50%**입니다 (Simon and Campasano, 2012).

마치 **하향 에스컬레이터** 위에서 위로 올라가려고 하는 것과 같습니다. VIX 현물은 위아래로 움직이지만, VX 선물은 이 "에스컬레이터 효과"(콘탱고) 때문에 계속 아래로 끌려갑니다. 이 지속적인 콘탱고가 우리가 6장에서 VX에서 **모멘텀 전략이 꽤 잘 작동한다**는 것을 발견하는 이유입니다.

**추가 참고**: 평균 롤 수익률은 VX 외에 다른 선물에서도 평균 현물 수익률에 비해 상당히 클 수 있습니다. 표 5.1은 옥수수의 연율화 롤 수익률이 2.8%의 현물 수익률에 비해 -12.8%임을 보여주고, Erb와 Harvey는 1982년 12월부터 2004년 5월까지의 기간에 난방유의 연율화 롤 수익률이 0.93%의 현물 수익률에 비해 4.6%라고 계산했습니다 (Erb and Harvey, 2006).

---

### 캘린더 스프레드는 평균회귀하는가?

이제 핵심 질문으로 돌아옵시다. **캘린더 스프레드(calendar spread)**는 한 선물 계약의 **롱 포지션(long position)**과 동일한 기초자산이지만 만기월이 다른 다른 선물 계약의 **숏 포지션(short position)**으로 구성된 포트폴리오입니다.

스프레드 일반에 대한 이전 경험을 바탕으로, 캘린더 스프레드는 평균회귀에 훌륭한 후보가 될 것 같습니다: 두 레그 모두 정확히 같은 기초자산을 추적하지 않습니까? 그러나 여기서도 **롤 수익률이 우리의 직관을 탈선시킵니다.** 식 5.7에 표현된 선물 가격 모델이 이를 명확하게 해줄 것입니다.

#### 수학적 분석

모든 스프레드 거래와 마찬가지로, 매 기간 두 레그의 시장 가치를 동일하게 유지한다고 가정하면서, 거래 신호를 생성하기 위해 두 레그의 **로그 가격 차이**로 스프레드를 정의할 수 있습니다 (3장 참조).

원월물 계약을 롱하고 근월물 계약을 숏하는 스프레드 포트폴리오의 로그 시장 가치는 식 5.7에 따라 $T_2 > T_1$일 때 단순히 $\gamma(T_1 - T_2)$입니다. (다시 말하지만, 이 간단한 공식은 $T_2 - T_1$이 크면 적용되지 않을 수 있습니다.)

**핵심 통찰**: 캘린더 스프레드 거래 신호가 **현물 가격에 전혀 의존하지 않고**, 오직 **롤 수익률에만 의존**합니다!

2장에서 배웠듯이, (가격 시계열과 반대로) 수익률 시계열은 거의 항상 평균회귀합니다. 여기서 우리는 선물의 총 수익률이 아니라 **롤 수익률 성분만**을 고려하고 있으므로, 상황이 다를 수 있습니다. (식 5.7에 표현된 모델이 현물 및 롤 수익률 모두 일정하다고 전제하지만, 그럼에도 불구하고 롤 수익률이 천천히 변하는 상황에 적용하려고 시도할 수 있습니다.)

CL의 12개월 로그 캘린더 스프레드에 대해 ADF 검정을 실행하면, 실제로 **99% 확률로 정상(stationary)**이고, **반감기(half-life)**가 **36일**임을 발견했습니다. 또한, CL의 로그 캘린더 스프레드에 일반적인 선형 평균회귀 전략을 적용하면, 2008년 1월 2일부터 2012년 8월 13일까지 **8.3%의 APR**과 **1.3의 샤프 비율**을 얻습니다. 백테스트의 세부 사항은 예제 5.4에 설명되어 있습니다.

---

### 예제 5.4: 캘린더 스프레드의 평균회귀 거래

본문에서 논의한 대로, 원월물 계약을 롱하고 근월물 계약을 숏하는 캘린더 스프레드 포트폴리오의 로그 시장 가치는 $T_2 > T_1$일 때 단순히 $\gamma(T_1 - T_2)$입니다. $T_1$과 $T_2$가 특정 캘린더 스프레드에 대해 고정되어 있으므로, 거래 신호를 생성하기 위해 (희망적으로) 평균회귀하는 $\gamma$를 사용할 수 있습니다.

#### 단계 1: 반감기 계산

아래 프로그램 *calendarSpdsMeanReversion.m*에서, CL 계약의 가격이 $\tau$ x $M$ 배열 *cl*에 저장되어 있다고 가정합니다. 여기서 $\tau$는 거래일 수이고, $M$은 계약 수입니다. 예제 5.3과 같은 방식으로 $\gamma$를 계산하고, 결과 값 $\gamma$를 $\tau$ x 1 배열 *gamma*에 저장합니다. 첫 번째 단계로, $\gamma$의 반감기를 찾습니다.

```
isGoodData=find(isfinite(gamma));
gammalag=lag(gamma(isGoodData), 1);
deltaGamma=gamma(isGoodData)-gammalag;
deltaGamma(1)=[];
gammalag(1)=[];
regress_results=ols(deltaGamma, [gammalag ...
 ones(size(gammalag))]);
halflife=-log(2)/regress_results.beta(1);
```

이 코드는 **OU(Ornstein-Uhlenbeck) 과정**의 반감기를 추정합니다:
1. $\gamma$의 변화량($\Delta\gamma$)을 전기의 $\gamma$에 대해 회귀
2. 기울기 계수($\beta_1$)가 음수면 평균회귀가 존재
3. 반감기 = $-\ln(2)/\beta_1$

반감기는 약 **36일**로 발견되었습니다.

#### 단계 2: Z-스코어 계산

선형 평균회귀 전략을 적용하려면, 예제 2.5에서 보여준 것처럼 룩백을 반감기와 같게 설정하고 Z-스코어를 계산해야 합니다.

```
lookback=round(halflife);
ma=movingAvg(gamma, lookback);
mstd=movingStd(gamma, lookback);
zScore=(gamma-ma)./mstd;
```

#### 단계 3: 계약 쌍 선택 (가장 어려운 부분!)

여기가 가장 어려운 부분입니다. 세 가지 기준에 따라 각 역사적 날에 원월물과 근월물 계약 쌍을 선택해야 합니다:

- 1. 계약 쌍의 보유 기간은 **3개월(61거래일)**이다.
- 2. 현재 근월물 계약 만기 **10일 전**에 다음 계약 쌍으로 롤 포워드한다.
- 3. 근월물과 원월물 계약의 만기일은 **1년** 떨어져 있다.

이러한 계약을 선택하면, 나중에 수정할 수 있지만 처음에는 원월물 계약에 롱 포지션을 잡고 근월물에 숏 포지션을 잡는다고 가정합니다.

```
isExpireDate=false(size(cl));
positions=zeros(size(cl));
```

```
isExpireDate=isfinite(cl) & ~isfinite(fwdshift(1, cl));
holddays=3*21;
numDaysStart=holddays+10;
numDaysEnd=10;
spreadMonth=12; % 원월물과 근월물 계약 사이의 월 수.
for c=1:length(contracts)-spreadMonth
  expireIdx=find(isExpireDate(:, c));
  expireIdx=expireIdx(end); % 초기에 일부 누락된 데이터가 있을 수 있음
  if (c==1)
    startIdx=max(1, expireIdx-numDaysStart);
    endIdx=expireIdx-numDaysEnd;
  else % 다음 근월물 계약이 현재 계약 종료 전까지 시작하지 않도록 보장
    myStartIdx=endIdx+1;
    myEndIdx=expireIdx-numDaysEnd;
    if (myEndIdx-myStartIdx >= holddays)
       startIdx=myStartIdx;
       endIdx=myEndIdx;
    else
       startIdx=NaN;
    end
end
if (~isempty(expireIdx) & endIdx > startIdx)
    positions(startIdx:endIdx, c)=-1;
    positions(startIdx:endIdx, c+spreadMonth)=1;
  end
end
```

코드의 핵심 로직을 풀어보면:
- `isExpireDate`: 가격이 존재하다가 다음 날 NaN이 되는 날을 만기일로 식별
- `positions(:,c)=-1`: 근월물에 숏
- `positions(:,c+spreadMonth)=1`: 12개월 후 만기 원월물에 롱
- 연속 계약 간 겹침이 없도록 `myStartIdx=endIdx+1`로 조정

#### 단계 4: 평균회귀 전략 적용

마지막으로, 선형 평균회귀 전략을 적용하여 실제 포지션을 결정하고 포트폴리오의 레버리지 없는 일별 수익률을 계산합니다. (일별 수익률은 두 계약이 있으므로 일별 손익을 2로 나눈 것입니다.)

```
positions(isnan(zScore), :)=0;
positions(zScore > 0, :)=-positions(zScore > 0, :);
ret=smartsum(lag(positions).*(cl-lag(cl, 1))./lag(cl, 1), ...
 2)/2;
ret(isnan(ret))=0;
```

핵심 라인 해석:
- `zScore > 0`이면 포지션 방향을 **뒤집음**: $\gamma$가 평균 위에 있으면 원래 롱/숏을 반전. 왜냐하면 $\gamma$가 평균으로 돌아올 것이라 예상하므로!
- 일별 수익률은 두 계약이 있으므로 손익을 **2로 나눔**

#### 예제 5.4의 성과

이 결과는 2008년 1월 2일부터 2012년 8월 13일까지 **8.3%의 매력적인 레버리지 없는 APR**과 **1.3의 샤프 비율**을 보여줍니다. 누적 수익률 곡선은 그림 5.7에 표시되어 있습니다.

![](_page_19_Figure_3.jpeg)

**그림 5.7** CL 12개월 캘린더 스프레드에 적용된 선형 평균회귀 전략의 누적 수익률

### 계절성과 VX 캘린더 스프레드

**계절성 참고**: 상품 시장을 공부하는 학생들은 계절성이 종종 두드러진 특징이라는 것을 압니다. 따라서 특정 시장의 경우, **특정 월(그리고 특정 월 간격)의 캘린더 스프레드만** 평균회귀한다는 것을 발견할 수 있습니다. 그러나 우리는 여기서 이러한 시장 의존적 세부 사항을 추구하지 않을 것입니다.

#### VX 캘린더 스프레드의 특수성

VX 캘린더 스프레드에도 같은 선형 평균회귀 전략을 시도할 수 있습니다. 하지만 중요한 차이가 있습니다:

**식 5.7은 기초자산이 *거래되는* 자산인 선물에만 적용**됩니다. VIX는 거래되는 자산이 아니라 **지수**입니다! (그림 5.4에서 CL에 대해 했듯이 로그 VX 선물 가격을 만기까지의 시간의 함수로 산점도로 그리면, 직선 위에 떨어지지 않는다는 것을 발견할 것입니다.)

다양한 연구자들이 VX 선물에 적합한 대안 공식을 제안했지만 (예: Dupoyet, Daigler, and Chen, 2011 참조), VX 선물 자체의 비평균회귀에 직면하여 VX 캘린더 스프레드의 평균회귀 특성을 **이론적으로** 설명할 수 있는 것은 없다는 것을 발견했습니다. 따라서 우리는 **경험적 관찰**에만 의존할 수 있습니다:

- VX의 비율 *back/front*에 대한 ADF 검정도 **99% 확률로 정상**임을 보여줌
- 신호로 이 비율을 사용하여 (이동평균과 표준편차에 대해 **15일 룩백**으로) 일반적인 선형 평균회귀 전략을 적용

**결과** (2008년 10월 27일 ~ 2012년 4월 23일):
- **APR**: 17.7%
- **샤프 비율**: 1.5

![](_page_20_Figure_2.jpeg)

**그림 5.8** VX 캘린더 스프레드에 대한 선형 평균회귀 전략의 누적 수익률

하지만 **2008년 10월 이전에는 훨씬 더 저조한 성과**를 보였습니다. 다음 섹션에서, 2008년 금융 위기 시기 전후로 VIX와 그 선물의 행동에 **레짐 변화**가 있다는 그래픽 증거를 제시할 것이므로, 아마도 이 전략 성과의 급격한 변화도 그것과 관련이 있을 것입니다.

---

## 선물 시장간 스프레드: 다른 기초자산 선물의 짝짓기

### 왜 대부분 실패하는가?

이 장의 서론에서 말했듯이, 평균회귀하는 **선물 시장간 스프레드(intermarket spread)** — 즉, **다른 기초자산**의 선물 쌍 — 를 찾는 것은 쉽지 않습니다. 그럼에도 불구하고, 일반적인 용의자들을 체계적으로 검토해 봅시다.

### 에너지 복합체: 매력적이지만 실망스러운

선물 페어 트레이딩의 가장 명백한 후보는 밀접하게 관련된 시장 간의 **시장간 스프레드(intermarket spreads)**입니다. 예를 들어, 에너지 복합체는 풍부한 잠재적 기회를 제공해야 합니다:

- **CL**: WTI 원유 (NYMEX)
- **BZ**: 브렌트 원유 (NYMEX)
- **RB**: 무연 휘발유 (NYMEX)
- **HO**: 난방유 (NYMEX)

#### 크랙 스프레드의 실패

이 네 계약에 대해 요한센 검정을 실행하기 전에, 먼저 잘 알려진 **크랙 스프레드(crack spread)**를 살펴봅시다.

크랙 스프레드란?
- **CL 3계약 롱**, **RB 2계약 숏**, **HO 1계약 숏**
- "크랙"이라고 불리는 이유: 원유 분자의 긴 탄화수소 사슬을 **분해(crack)**하여 휘발유와 난방유를 얻을 수 있기 때문
- **3:2:1 헤지 비율**의 근거: 3배럴의 CL이 대략 2배럴의 RB와 1배럴의 난방유를 생산하기 때문에 나옴

마치 밀가루로 빵과 과자를 만드는 것처럼, 원유를 "깨서(crack)" 석유 제품을 만드는 것이죠! 하지만 이것이 모든 정유사에 보편적으로 적용되지는 않습니다.

크랙 스프레드 거래의 한 가지 장점은 NYMEX가 이에 대한 기성 바스켓을 제공하며, 별도로 거래하는 것보다 **훨씬 낮은 증거금 요구 사항**을 가진다는 것입니다.

그러나 **2002년 5월 20일 ~ 2012년 5월 4일**까지의 크랙 스프레드에 대해 ADF 검정을 실행하면, 이 스프레드가 **평균회귀하지 않음**을 보여줍니다!

![](_page_21_Figure_5.jpeg)

**그림 5.9** 크랙 스프레드

이 스프레드의 차트(그림 5.9)는 2007년 3월 9일경부터 2008년 7월 3일까지 극적인 가치 증가를 보여주고, 그 후에 급격한 하락을 보여주며, 선형 평균회귀 전략을 실행하면 해당 기간에 **음의 수익률**을 보여줍니다.

> **주의**: 이 검정에서는 **수익률이 아닌 가격**을 사용하여 연속 계약을 수정해야 합니다. 그렇지 않으면 이 가격 스프레드가 1장에서 설명한 대로 롤오버 시 불연속적인 점프를 보여줄 것입니다.

#### CL vs BZ 스프레드의 실패

또 다른 좋은 후보로 보이는 스프레드는 1:1 비율의 CL과 BZ입니다. 결국, 그들의 기초자산은 둘 다 원유입니다. 그러나 또 다른 빠른 ADF 검정은 그것이 **정상과는 거리가 멀다**는 것을 보여줄 것입니다. BZ는 다양한 요인으로 인해 CL을 **끊임없이 능가**했습니다.

가능한 원인들:
- **미국의 증가하는 석유 생산** (Friedman, 2012): WTI 공급 증가로 가격 하락 압력
- **오클라호마 쿠싱의 파이프라인 병목현상** (Philips, 2012): WTI 인도 지점의 물류 문제
- **2012년 이란 석유에 대한 금수 조치**와 같은 지정학적 우려: 미국보다 유럽, 따라서 BZ에 더 영향

> **실전 팁**: 시장간 스프레드를 직접 백테스트하려면, 1장에서 경고한 대로 **가격이 동기화되어 있는지 확인**하는 것을 잊지 마세요! 특히, BZ가 2001년 9월 5일 NYMEX에서 거래되기 시작하기 전에는 런던의 국제석유거래소에서 거래되었으며, 이는 CL이 항상 거래된 NYMEX와 분명히 **다른 마감 시간**을 가지고 있습니다. 따라서 종가를 사용하여 2001년 9월 5일 이전의 BZ-CL 스프레드를 백테스트하는 것은 잘못될 것입니다. 또한, 우리는 종종 포인트를 USD로 변환하기 위해 선물 가격에 계수를 곱해야 합니다.

평균회귀하는 시장간 선물 스프레드 검색은 지금까지 성과가 없었습니다. 그러나 이제 그것을 바꿀 하나의 특이한 스프레드에 대해 논의할 것입니다.

---

### 변동성 선물 대 주가지수 선물: 드디어 찾은 오아시스!

#### 역상관의 발견

많은 트레이더들은 변동성이 주식 시장 지수와 **역상관(anti-correlated)**된다는 것을 관찰했습니다: 시장이 하락하면 변동성이 급등하고, 그 반대의 경우도 어느 정도 마찬가지입니다.

마치 **시소**와 같습니다! 시장(ES)과 변동성(VX)이 시소의 양 끝에 앉아 있는 것처럼요.

이 **역관계(inverse relationship)**를 시각화하는 한 가지 방법은 **E-mini S&P 500 선물** 근월물 가격인 **ES**를 **VIX 선물** 근월물 가격인 **VX**에 대해 플롯하는 것입니다. 이것은 MATLAB의 "scatter" 함수로 수행할 수 있으며, 결과는 그림 5.10에 표시되어 있습니다.

![](_page_22_Figure_8.jpeg)

**그림 5.10** 변동성 레짐 연구: ES 대 VX

#### 두 개의 레짐 발견

이 플롯의 첫 번째 명백한 특징은 실제로 주가지수가 변동성과 **역관계**를 가지고 있다는 것입니다. 그러나 더 흥미롭게도, **두 개의 주요 레짐(regimes)**이 있는 것 같습니다:

| 레짐 | 기간 | 특징 |
|------|------|------|
| 레짐 1 | 2004년 ~ 2008년 5월 | 주어진 주가지수 수준에서 상대적으로 높은 변동성 |
| 레짐 2 | 2008년 8월 ~ 2012년 | 주어진 주가지수 수준에서 눈에 띄게 **낮은** 변동성. 하지만 변동성의 **범위**는 더 큼 |

평이하게 말하면, 시장은 요즘 **덜 변동적**입니다. 그러나 변동성의 범위는 지금 더 커서, 이전보다 더 극단적인 변동성을 가진 날들이 있다는 것을 의미합니다. 마치 "평소에는 조용하지만 한번 폭발하면 엄청나게 폭발하는" 성격으로 바뀐 것이죠. (과도기적 상태를 나타낼 수 있는 다른 더 짧은 기간이 있지만, 분석에서는 무시할 것입니다.)

> **분석 원칙**: 두 레짐의 혼합에 대해 선형 회귀를 실행하거나 요한센 검정을 적용하는 것은 **실수**일 것이므로, 이 글을 쓰는 시점까지 연장되는 **두 번째 레짐**에 집중합니다.

#### 회귀 모델 구축

나중에 이 회귀의 다양한 통계를 사용하여 거래 모델을 구축하고자 하므로, 2008년 8월 이후 데이터의 처음 **500일**만 훈련 세트로 **회귀 계수(regression coefficients)**를 계산하기로 선택합니다.

**중요한 단위 조정**: 실제로 **선형 회귀(linear regression)** 프로그램을 통해 가격을 실행하기 전에, VX와 ES의 선물 가격이 다른 단위로 되어 있다는 것을 기억해야 합니다:
- VX: **1포인트 움직임 = $1,000**
- ES: **1포인트 움직임 = $50**

따라서 헤지 비율이 계약 수의 비율을 적절히 반영하도록 VX의 가격에 1,000을, ES의 가격에 50을 곱해야 합니다.

**선형 관계**:

$$ES \times 50 = -0.3906 \times VX \times 1,000 + 77,150 \qquad (5.11)$$

여기서 ES와 VX는 각각의 선물 (결제) 가격입니다. 잔차의 표준편차는 $2,047입니다.

이 공식을 풀어보면:
- 이는 **0.3906 계약의 VX를 롱**하고 **1 계약의 ES를 롱**하는 포트폴리오가 **정상**이어야 한다는 것을 의미합니다
- 이 포트폴리오의 시장 가치 플롯(그림 5.11)이 우리를 납득시킬 것입니다

![](_page_23_Figure_8.jpeg)

**그림 5.11** ES와 VX의 정상 포트폴리오

그림 5.11에서 보듯이, 이 포트폴리오의 시장 가치는 일정한 범위 내에서 오르내리며 **평균으로 회귀**하는 패턴을 보입니다!

#### 볼린저 밴드 유사 전략

우리는 이 포트폴리오의 가치가 훈련 세트에서 결정된 잔차의 **1 표준편차**에서 벗어날 때마다 숏함으로써 **볼린저 밴드 유사(Bollinger band-like)** 평균회귀 전략을 구성할 수 있습니다.

포트폴리오 가치가 평균에서 1 표준편차 이상 벗어나면:
- **위로 벗어남** -> 포트폴리오 숏 (가격이 내려올 것으로 기대)
- **아래로 벗어남** -> 포트폴리오 롱 (가격이 올라올 것으로 기대)

#### 성과

**테스트 세트** (2010년 7월 29일 ~ 2012년 5월 8일):
- **APR**: 12.3%
- **샤프 비율**: 1.4

이 전략은 특히 **Standard and Poor's가 미국 신용 등급을 하향 조정한 시기** 전후로 특히 수익성이 높았습니다. 시장의 급격한 변동이 VX-ES 스프레드를 극단으로 밀어냈고, 그것이 다시 평균으로 돌아오면서 큰 수익을 안겨준 것이죠.

누적 수익률 곡선은 그림 5.12에 표시되어 있습니다.

![](_page_24_Figure_2.jpeg)

**그림 5.12** VX-ES 평균회귀 전략의 누적 수익률

> **다음 장 예고**: VX-ES 스프레드의 평균회귀 특성에 의존하지 않는 다른 VX 대 ES 전략을 사용할 수 있습니다. 그것은 **모멘텀 전략**이기 때문에, 다음 장에서 논의할 것입니다.

---

## 핵심 요점 정리

이 장에서 배운 가장 중요한 교훈들을 정리합니다:

1. **상품 통화의 기회**: "상품" 통화(AUD, CAD, ZAR, NOK 등)는 그룹으로서 **공적분에 대한 많은 기회**를 제공합니다. 마치 같은 반에서 비슷한 성적을 받는 학생들처럼, 비슷한 경제를 가진 나라의 통화는 함께 움직이는 경향이 있습니다.

2. **수익률 계산의 함정**: 두 통화 교차환율이 있는 포트폴리오의 수익률을 계산할 때, 그들이 **같은 호가 통화를 가지는지, 같은 기준 통화를 가지는지, 또는 둘 다 아닌지**에 주의를 기울여야 합니다. 수익률을 계산하는 공식은 모든 경우에 같지 않습니다! 이것을 무시하면 백테스트 결과가 무의미해집니다.

3. **선물 수익률의 두 구성요소**: 선물 수익률은 **현물 수익률(spot return)**과 **롤 수익률(roll return)**의 두 가지 구성요소로 이루어집니다. 마치 부동산 투자의 수익이 "시세 차익"과 "임대 수입"으로 나뉘는 것과 비슷합니다.

4. **백워데이션과 콘탱고**:
   - **백워데이션**: 롤 수익률이 양수이고, 원월물 계약이 근월물 계약보다 **저렴**하다는 것을 의미
   - **콘탱고**: 롤 수익률이 음수이고, 원월물 계약이 근월물 계약보다 **비싸다**는 것을 의미

5. **롤 수익률의 함정**: 롤 수익률 때문에, **현물 가격의 평균회귀가 선물 가격의 평균회귀를 유도하지 않을 수 있습니다!** VIX가 평균회귀하지만 VX 선물은 그렇지 않은 사례가 이를 극적으로 보여줍니다. 이 교훈을 무시하면 Chan 교수처럼 큰 손실을 볼 수 있습니다.

6. **캘린더 스프레드의 평균회귀**: 거래 자산의 선물 캘린더 스프레드의 평균회귀는 **롤 수익률의 평균회귀**에 의존합니다. 현물 가격이 아니라 롤 수익률이 핵심입니다!

---

## 용어 사전 (Glossary)

| 한국어 (영어) | 정의 |
|---------------|------|
| **평균 회귀 (Mean Reversion)** | 가격이 장기 평균으로 되돌아가는 경향. 시소가 기울어졌다가 균형점으로 돌아오는 것과 유사. |
| **공적분 (Cointegration)** | 두 시계열이 개별적으로는 랜덤 워크하지만, 특정 선형 조합이 정상(stationary)인 통계적 관계. |
| **기준 통화 (Base Currency)** | 통화 쌍에서 앞에 오는 통화. AUD.USD에서 AUD가 기준 통화. |
| **호가 통화 (Quote Currency)** | 통화 쌍에서 뒤에 오는 통화. AUD.USD에서 USD가 호가 통화. |
| **교차환율 (Cross-Rate)** | USD를 거치지 않고 두 통화를 직접 비교한 환율. 예: AUD.CAD, EUR.GBP. 환전소 삼각 거래로 합성 가능. |
| **롤오버 이자 (Rollover Interest)** | 통화 포지션을 야간에 보유할 때 발생하는 두 통화의 이자율 차이. 캐리 트레이드의 기본 원리. |
| **캘린더 스프레드 (Calendar Spread)** | 같은 기초자산이지만 만기가 다른 두 선물의 롱-숏 포트폴리오. 선물 만기 갈아타기 전략의 기본 단위. |
| **롤 수익률 (Roll Return / Roll Yield)** | 선물이 만기에 현물 가격으로 수렴하면서 발생하는 수익률. 미래 배달 약속의 가격이 현물로 수렴하는 과정에서 생기는 수익. |
| **백워데이션 (Backwardation)** | 근월물 선물이 원월물보다 비싼 상태. 롤 수익률 양수. "정상 백워데이션"은 케인스의 이론에서 유래. |
| **콘탱고 (Contango)** | 원월물 선물이 근월물보다 비싼 상태. 롤 수익률 음수. 보관 비용이 높은 상품에서 자주 관찰. |
| **현물 수익률 (Spot Return)** | 기초자산 현물 가격의 변화에서 발생하는 수익률. |
| **시장간 스프레드 (Intermarket Spread)** | 서로 다른 기초자산의 선물을 짝지은 포트폴리오. 예: 원유 vs 휘발유, VX vs ES. |
| **크랙 스프레드 (Crack Spread)** | 원유를 정제하여 휘발유와 난방유를 생산하는 관계를 반영한 3:2:1 선물 포트폴리오. |
| **요한센 검정 (Johansen Test)** | 여러 시계열 간의 공적분 관계와 최적 헤지 비율을 동시에 찾는 통계 검정. |
| **샤프 비율 (Sharpe Ratio)** | 위험 대비 수익을 측정하는 지표. (평균 초과 수익률) / (수익률의 표준편차). 1.0 이상이면 양호, 2.0 이상이면 우수. |
| **반감기 (Half-Life)** | 평균회귀 속도를 나타내는 지표. 가격이 평균에서 벗어난 거리의 절반을 회복하는 데 걸리는 시간. |
| **VIX 지수 (VIX Index)** | S&P 500 옵션에서 추출한 내재 변동성 지수. "공포 지수"라고도 불림. 평균회귀하지만 VX 선물은 그렇지 않음. |
| **레짐 (Regime)** | 시장이 특정 기간 동안 보이는 구조적 행동 패턴. 레짐 변화 시 기존 전략이 무효화될 수 있음. |
| **상품 통화 (Commodity Currency)** | 자원 수출에 크게 의존하는 국가의 통화. AUD, CAD, ZAR, NOK 등. 원자재 가격과 높은 상관관계. |
